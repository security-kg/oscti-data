<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<title>Thoughts on the Security of qmail - Schneier on Security</title>
	<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel='dns-prefetch' href='//c0.wp.com' />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Feed" href="https://www.schneier.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Comments Feed" href="https://www.schneier.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Thoughts on the Security of qmail Comments Feed" href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/feed/" />
<link rel='stylesheet' id='wp-block-library-css'  href='https://c0.wp.com/c/5.7/wp-includes/css/dist/block-library/style.min.css' type='text/css' media='all' />
<style id='wp-block-library-inline-css' type='text/css'>
.has-text-align-justify{text-align:justify;}
</style>
<style id='woocommerce-inline-inline-css' type='text/css'>
.woocommerce form .form-row .required { visibility: visible; }
</style>
<link rel='stylesheet' id='schneier-css'  href='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/style.css?ver=1.0.0' type='text/css' media='all' />
<link rel='stylesheet' id='schneier-main-css'  href='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/dist/css/style.css?ver=1.0.2' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='https://c0.wp.com/p/jetpack/9.5.2/css/jetpack.css' type='text/css' media='all' />
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js?ver=3.5.1' id='jquery-js'></script>
<link rel="https://api.w.org/" href="https://www.schneier.com/wp-json/" /><link rel="alternate" type="application/json" href="https://www.schneier.com/wp-json/wp/v2/posts/1916" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.schneier.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.schneier.com/wp-includes/wlwmanifest.xml" /> 

<link rel="canonical" href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html" />
<link rel='shortlink' href='https://www.schneier.com/?p=1916' />
<link rel="alternate" type="application/json+oembed" href="https://www.schneier.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2007%2F11%2Fthoughts_on_the.html" />
<link rel="alternate" type="text/xml+oembed" href="https://www.schneier.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2007%2F11%2Fthoughts_on_the.html&#038;format=xml" />
	<noscript><style>.woocommerce-product-gallery{ opacity: 1 !important; }</style></noscript>
	<link rel="icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-32x32.png" sizes="32x32" />
<link rel="icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-180x180.png" />
<meta name="msapplication-TileImage" content="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-270x270.png" />
		<style type="text/css" id="wp-custom-css">
			#schneier_promotion-2 img {
    max-width: 180px;
}		</style>
		</head>

<body class="post-template-default single single-post postid-1916 single-format-standard theme-schneier woocommerce-no-js">

	<div id="wrapper">
		<div id="main">

			<header>
				<div id="header">
					<h1>
						<a href="https://www.schneier.com/" rel="home">
							Schneier on Security						</a>
					</h1>
				</div>
			</header>

			<nav>
				<div class="nav" id="header-nav">
					<div class="menu-main-menu-container"><ul id="menu-main-menu" class="menu"><li id="menu-item-50175" class="menu1 menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-50175 current-menu-item"><a href="https://www.schneier.com">Blog</a></li>
<li id="menu-item-50916" class="menu2 menu-item menu-item-type-post_type menu-item-object-page menu-item-50916"><a href="https://www.schneier.com/crypto-gram/">Newsletter</a></li>
<li id="menu-item-50166" class="menu3 menu-item menu-item-type-post_type menu-item-object-page menu-item-50166"><a href="https://www.schneier.com/books/">Books</a></li>
<li id="menu-item-50169" class="menu4 menu-item menu-item-type-custom menu-item-object-custom menu-item-50169"><a href="https://www.schneier.com/essays/">Essays</a></li>
<li id="menu-item-50170" class="menu5 menu-item menu-item-type-custom menu-item-object-custom menu-item-50170"><a href="https://www.schneier.com/news/">News</a></li>
<li id="menu-item-50171" class="menu6 menu-item menu-item-type-custom menu-item-object-custom menu-item-50171"><a href="https://www.schneier.com/talks/">Talks</a></li>
<li id="menu-item-50167" class="menu7 menu-item menu-item-type-post_type menu-item-object-page menu-item-50167"><a href="https://www.schneier.com/academic/">Academic</a></li>
<li id="menu-item-50174" class="menu8 menu-item menu-item-type-post_type menu-item-object-page menu-item-50174"><a href="https://www.schneier.com/blog/about/">About Me</a></li>
</ul></div>				</div>
			</nav>

			
<aside>
	<div class="sidebar" id="sidebar-one">
		<section><div class="sidesection widget widget_schneier_search" id="schneier_search-3"><h3>Search</h3>
<p class="small">
	<em>Powered by <a href="https://duckduckgo.com/">DuckDuckGo</a></em></p>

<form method="get" action="https://duckduckgo.com/">

	<input type="hidden" name="kh" value="1" /><!-- use https -->

	<input id="search" name="q" size="15" maxlength="255" />

	<input type="submit" value="Go" /><br>

	<input type="radio" name="sites" id="searchblog" value="www.schneier.com/blog" />
	<label for="searchblog">Blog</label>

	<input type="radio" name="sites" id="searchessays" value="www.schneier.com/essays" />
	<label for="searchessays">Essays</label>

	<input type="radio" name="sites" id="searchall" value="www.schneier.com" checked="" />
	<label for="searchall">Whole site</label>

</form>
</div></section><section><div class="sidesection widget widget_schneier_social" id="schneier_social-2"><h3>Subscribe</h3>
<div id="subscription-buttons">

	<a href="https://www.schneier.com/feed/atom"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/rss-32px.png" alt="Atom Feed" /></a><a href="https://www.facebook.com/bruce.schneier"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/facebook-32px.png" alt="Facebook" /></a><a href="https://twitter.com/schneierblog/"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/twitter-32px.png" alt="Twitter" /></a><a href="https://www.amazon.com/Schneier-on-Security/dp/B0053HDDWW/"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/kindle-32px.png" alt="Kindle" /></a><a href="https://www.schneier.com/crypto-gram"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/email-32px.png" alt="E-Mail Newsletter (Crypto-Gram)" /></a>
</div>
</div></section>	</div>
</aside>

			<div id="content">

				
		<p id="breadcrumbs">

			<a href="https://www.schneier.com">Home</a><a href="https://www.schneier.com/blog/archives/">Blog</a>		</p>

		
<article id="post-1916" class="post-1916 post type-post status-publish format-standard hentry category-uncategorized tag-computer-security tag-e-mail tag-vulnerabilities">

	<div class="article">

		<h2 class="entry">Thoughts on the Security of qmail</h2>
		<p>Dan Bernstein wrote an <a href="http://cr.yp.to/qmail/qmailsec-20071101.pdf">interesting paper</a> on the security lessons he&#8217;s learned from qmail.</p>
<blockquote><p>My views of security have become increasingly ruthless over the years. I see a huge amount of money and effort being invested in security, and I have become convinced that most of that money and effort is being wasted. Most &#8220;security&#8221; efforts are designed to stop yesterday&#8217;s attacks but fail completely to stop tomorrow&#8217;s attacks and are of no use in building invulnerable software. These efforts are a distraction from work that does have long-term value.</p></blockquote>
<p>Very interesting stuff, some counter to conventional security wisdom.</p>
<blockquote><p>I have become convinced that this &#8220;principle of least privilege&#8221; is fundamentally wrong.  Minimizing privilege might reduce the damage done by some security holes but almost never fixes the holes.  Minimizing privilege is not the same as minimizing the amount of trusted code, does not have the same benefits as minimizing the amount of trusted code, and does not move us any closer to a secure computer system.</p></blockquote>

		
			<p class="entry-tags">
				<span class="tags-links">Tags: <a href="https://www.schneier.com/tag/computer-security/" rel="tag">computer security</a>, <a href="https://www.schneier.com/tag/e-mail/" rel="tag">e-mail</a>, <a href="https://www.schneier.com/tag/vulnerabilities/" rel="tag">vulnerabilities</a></span>			</p>

		
		
		<p class="posted">
			<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html" rel="bookmark">Posted on November 16, 2007 at 6:47 AM</a>			â€¢
			<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html#comments">43 Comments</a>		</p>

		<aside><div class="schneier-share share" data-uri="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html" data-title="Thoughts on the Security of qmail" data-order="facebook twitter tumblr" data-social-share-privacy="true" /></aside>
	</div>

</article>


	<h3 id="comments">Comments</h3>

	
		<article class="comment even thread-even depth-1" id="comment-74698">

			<div class="comment by-william-morriss ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://ephemerallaw.blogspot.com' rel='external nofollow ugc' class='url'>William Morriss</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74698">
						November 16, 2007 7:38 AM					</a>

				</p>

				<p>I&#8217;m not sure I agree with the author&#8217;s argument that money is being wasted because &#8220;Most &#8216;security&#8217; efforts are designed to stop yesterday&#8217;s attacks but fail completely to stop tomorrow&#8217;s attacks and are of no use in building invulnerable software.&#8221;  It seems to me that there&#8217;s good value in defending yourself from yesterday&#8217;s attacks.  For example, you can avoid being victimized by people looking for soft targets using known exploits.  Invulnerable software might be nice, but the pursuit of (likely unattainable) invulnerable software shouldn&#8217;t distract from the value of learning from the past.</p>
<p>I posted in more detail, including some discussion of legal implications of security at <a href="http://ephemerallaw.blogspot.com/2007/11/protecting-against-yesterdays-threats.html" rel="nofollow ugc">http://ephemerallaw.blogspot.com/2007/11/protecting-against-yesterdays-threats.html</a>.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74699">

			<div class="comment by-simpleton ">

				<p class="commentcredit">

					<span class="commenter">simpleton</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74699">
						November 16, 2007 7:53 AM					</a>

				</p>

				<p>Thank you for the insight, Bill.  I don&#8217;t think anyone has considered that point before.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74700">

			<div class="comment by-chris-s ">

				<p class="commentcredit">

					<span class="commenter">Chris S</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74700">
						November 16, 2007 8:07 AM					</a>

				</p>

				<p>That would be &#8230;</p>
<p><a href="http://ephemerallaw.blogspot.com/2007/11/protecting-against-yesterdays-threats.html" rel="nofollow ugc">http://ephemerallaw.blogspot.com/2007/11/protecting-against-yesterdays-threats.html</a></p>
<p>&#8230;without the trailing period.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74701">

			<div class="comment by-guillaume ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.paralint.com/blog/' rel='external nofollow ugc' class='url'>Guillaume</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74701">
						November 16, 2007 8:40 AM					</a>

				</p>

				<p>I&#8217;m not sure about the least privilege security wisdom&#8230;</p>
<p>I always use a limited user account (even under Vista, I do not use the &#8220;one click away from being admin&#8221; account). I use it on purpose, exactly because I know there are vulnerabilities.  (I run XP, 2003, Vista, Debian and Solaris, same goes for all of them).</p>
<p>Maybe it&#8217;s just the interpretation of least privilege that is wrong ? Least priv. is one thing, and limiting trusted code is another. I don&#8217;t know qmail, but even if there weren&#8217;t a single line of trusted code in it, I would not run it as root. I would apply least privilege to it.</p>
<p>It doesn&#8217;t cost anything and it might help protect againts tomorow&#8217;s attacks.</p>
<p>Unfortunatly, not all software work in a least privilege environment&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74702">

			<div class="comment by-john-b ">

				<p class="commentcredit">

					<span class="commenter">John B</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74702">
						November 16, 2007 8:43 AM					</a>

				</p>

				<p><a href="http://www.chron.com/apps/comics/showComic.mpl?date=2007/11/16&amp;name=Dilbert" rel="nofollow ugc">Today&#8217;s Dilbert</a> is relevant.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74703">

			<div class="comment by-hans ">

				<p class="commentcredit">

					<span class="commenter">Hans</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74703">
						November 16, 2007 8:46 AM					</a>

				</p>

				<p>Now whats wrong with having both code executed with least privileges needed <em>and</em> reducing the amount of trusted code?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74704">

			<div class="comment by-krupa ">

				<p class="commentcredit">

					<span class="commenter">krupa</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74704">
						November 16, 2007 8:49 AM					</a>

				</p>

				<p>If you think adhering to least privilege is going to make your code secure, you need help.  Least privilege prevents certain classes of attacks.  E.g. If you run as a limited user on Windows an attack/attacker can&#8217;t write to system-wide registry keys or install a service or read/write other people&#8217;s data.</p>
<p>Least privilege, like every other security mechanism, is not a panacea.  His example in the paper proves that.  It&#8217;s good to prevent code from accessing things it doesn&#8217;t need, but that&#8217;s not all you have to worry about.  This is why security is hard!</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74705">

			<div class="comment by-rr ">

				<p class="commentcredit">

					<span class="commenter">Rr</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74705">
						November 16, 2007 8:57 AM					</a>

				</p>

				<p>I&#8217;m confused on Dan&#8217;s argument about least privilege. It seems to me that much of the &#8216;eliminating trusted code&#8217; is applying the principle of least privilege. Maybe just not in the &#8216;traditional Unix sense&#8217;.</p>
<p>Still a worthwhile read.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74706">

			<div class="comment by-sam-greenfield ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://samgreenfield.com' rel='external nofollow ugc' class='url'>Sam Greenfield</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74706">
						November 16, 2007 9:08 AM					</a>

				</p>

				<p>William&#8211;</p>
<p>You wrote, &#8220;Invulnerable software might be nice, but the pursuit of (likely unattainable) invulnerable software shouldn&#8217;t distract from the value of learning from the past.&#8221;</p>
<p>Most of Bernstein&#8217;s paper discussed vulnerabilities with other MTA agents by comparing them with the design of qmail. Many points of the paper focused on sendmail, one of the oldest pieces of software on the Internet still in common use today (first shipped in the early 80s).</p>
<p>I&#8217;m curious how you drew the conclusion that Bernstein was ignoring the past in the pursuit of bug-free code. If anything, I believe his design for qmail was based on fundamental security flaws with other MTAs.</p>
<p>An open question I wish the paper had addressed is when is it appropriate to dump an entire product because of fundamental design flaws and rewrite the entire product from scratch?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74707">

			<div class="comment by-derf ">

				<p class="commentcredit">

					<span class="commenter">derf</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74707">
						November 16, 2007 9:17 AM					</a>

				</p>

				<p>Semantics.  Least privilege for code is the same as &#8220;untrusted code&#8221;.  For example, there&#8217;s no valid reason for calc.exe in Windows to have read/write privilege to the network, hard drive, user files, memory locations of other programs, or any other location except possibly to access the clipboard.  No user action should be possible to allow this program to be given access, because the program, by design, has no built in facility to do so.  However, the security frameworks of current operating systems have no way to set this.  A simple bug in calc.exe would allow someone to completely undermine the entire operating system&#8217;s security because the program itself is not under any &#8220;least privilege&#8221; or &#8220;untrusted code&#8221; restraints.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74708">

			<div class="comment by-milan ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.sindark.com' rel='external nofollow ugc' class='url'>Milan</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74708">
						November 16, 2007 9:17 AM					</a>

				</p>

				<p>I really wish GMail had the option of telling you when and where the last login happened from. As it exists now, someone else can access your account at the same time you do (provided they got your password somehow) and there is no way to know it.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74709">

			<div class="comment by-hen ">

				<p class="commentcredit">

					<span class="commenter">Hen</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74709">
						November 16, 2007 9:19 AM					</a>

				</p>

				<p>&#8220;I have become convinced that this &#8220;principle of least privilege&#8221; is fundamentally wrong. Minimizing privilege might reduce the damage done by some security holes but almost never fixes the holes. Minimizing privilege is not the same as minimizing the amount of trusted code, does not have the same benefits as minimizing the amount of trusted code, and does not move us any closer to a secure computer system.&#8221;</p>
<p>I&#8217;m not sure I understood correctly. I would agree with opinion that &#8220;principle of least privilege&#8221; is not enough, but why fundamentally wrong ?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74710">

			<div class="comment by-logical-extremes ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://logicalextremes.blogspot.com/' rel='external nofollow ugc' class='url'>Logical Extremes</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74710">
						November 16, 2007 9:28 AM					</a>

				</p>

				<p>William makes a good point. Like Security &amp; Freedom, closing past holes &amp; developing better architectures are not mutually exclusive. Just think how much cleaner the Internet would be in terms of SPAM and Windows malware if all PCs were cleaned and updated.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74711">

			<div class="comment by-brandioch-conner ">

				<p class="commentcredit">

					<span class="commenter">Brandioch Conner</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74711">
						November 16, 2007 10:06 AM					</a>

				</p>

				<p>I agree &#8230; sort of &#8230; not not completely.</p>
<p>First off, systems can only be attacked if there is an avenue of attack available. Since we&#8217;re talking an email service, that pretty much means that it has to accept connections from unknown machines on the Internet.</p>
<p>Meanwhile, my Ubuntu workstation does not. So it is completely invulnerable to outside attack (unless someone can crack the TCP/IP stack).</p>
<p>Anyway, I agree with him about running the least amount of code. But I disagree with him that means running it with the least privilege is &#8220;fundamentally wrong&#8221;.</p>
<p>You cannot know that your code is perfect. So you have to operate on the assumption that it is not.</p>
<p>Which means you have to take steps to limit the access that that service has. In case it is cracked.</p>
<p>That means running it in a jail (if possible) and running it with the minimum rights needed (and looking for ways to further reduce the rights needed).</p>
<p>And there&#8217;s nothing that says you cannot do all of those concurrently.</p>
<p>My Ubuntu workstation doesn&#8217;t have any open ports, but I still log in as a regular user with restricted rights.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74712">

			<div class="comment by-anonymous ">

				<p class="commentcredit">

					<span class="commenter">Anonymous</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74712">
						November 16, 2007 10:15 AM					</a>

				</p>

				<p>@Brandioch, not necessarily true.<br />
accepting email != accepting connection</p>
<p>Your machine accepts connections only from trusted machines, but if a malicious email originating elsewhere is forwarded to you by one of those machines you can still be toasted.</p>
<p>If you use defense in depth (as you seem to) it&#8217;s less likely, but for clarification it&#8217;s not the connection it&#8217;s the content that matters.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74713">

			<div class="comment by-imno-kenthompson ">

				<p class="commentcredit">

					<span class="commenter">Imno Kenthompson</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74713">
						November 16, 2007 10:21 AM					</a>

				</p>

				<p>Why do you trust Dan Bernstein?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74714">

			<div class="comment by-bryan-feir ">

				<p class="commentcredit">

					<span class="commenter">Bryan Feir</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74714">
						November 16, 2007 10:55 AM					</a>

				</p>

				<p>@Anonymous</p>
<p>As you said to Brandioch Conner, not necessarily true.</p>
<p>For an email server, most of the security issues don&#8217;t really involve the contents of the message; that can be considered an opaque block for the most part.  The bigger security issues for the server involve the SMTP commands that act as the message envelope.  Remember that the destination for the email isn&#8217;t necessarily in the message itself, it&#8217;s in the SMTP envelope; the presence of To: and Cc: headers in the message is not required by SMTP.</p>
<p>If your machine only accepts connections from trusted machines, then presumably you trust those machines not to use you as a relay or twist the SMTP commands in an attempt to cause a security breach.</p>
<p>Now, a malicious payload in the email is something else, but that is really more to do with the security of the mail READER application than the mail server.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74715">

			<div class="comment by-alan ">

				<p class="commentcredit">

					<span class="commenter">Alan</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74715">
						November 16, 2007 10:56 AM					</a>

				</p>

				<p>I wish Dan would learn some other lessons involving QMail.</p>
<p>Ever try to set up greylisting or spam filtering or amavisd or any other process to filter mail on it?  It is painful.  Most of them require a software hack to make them work correctly at all.  (And give up if you are using Plesk.  They use a version that is just plain useless.)</p>
<p>Today&#8217;s Dilbert applies to Qmail.  It is restricted to the point of uselessness.</p>
<p>And my final comment on Qmail&#8230;</p>
<p>Never trust a queue structure designed by a cryptographer.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74716">

			<div class="comment by-havvok ">

				<p class="commentcredit">

					<span class="commenter">havvok</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74716">
						November 16, 2007 11:04 AM					</a>

				</p>

				<p>The principle of least privilege and reduction of trusted code are not the same thing; least privilege is the concept of restriction of privilege to perform a specific task, while trusted code is a component or section of a program which requires increased privilege to perfom its task.</p>
<p>It may seem like splitting hairs, but it is very crucial to understand.  By understanding which components of an application require increased privilege it is possible to isolate them; once they are isolated the developer can separate them into independant modules, and then apply the concept of Least Privilege to the environment.</p>
<p>Example: An application that accepts incoming requests to process payment data.  A service listens for incoming requests and hands them off to a process that parses the data into a uniform structure and performs validation.  The parser then supplies the data to payment processor which inspects the structure and validates its contents.  If everything meets the criteria it processes the payment and returns a result.</p>
<p>By splitting it across multiple processes you now have the ability to jail each process, or have each process running on different hardware to prevent compromise of one component from affecting another.  In addition to this you can also use all manner of firewall rules, operating system hardening, and such to reduce the access in each environement such that everything is locked down.</p>
<p>I understand that the above example is ridiculously contrived, but hopefully it illustrates the difference between reducing trusted code and implementing least privilege.  Or maybe I should just grab another cup of coffee ðŸ˜›</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74717">

			<div class="comment by-partdavid ">

				<p class="commentcredit">

					<span class="commenter">partdavid</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74717">
						November 16, 2007 11:17 AM					</a>

				</p>

				<p>I don&#8217;t see why anyone who&#8217;s read the article would be confused about the distinction between the &#8220;principle of least privilege&#8221; and &#8220;minimizing trusted code.&#8221;</p>
<p>Untrusted code, by definition, cannot violate the security regime. Code running under &#8220;least privilege&#8221; can violate it &#8220;a bit.&#8221; There are several examples in the paper describing the distinction.</p>
<p>Analogy: Invaders are pests, and we have a screen door. What Bernstein is saying is that opening the screen door allows pests in, even if you&#8217;re opening it <em>just enough</em> to allow your partygoers in and out.</p>
<p>Thanks to whomever gave the screen door analogy, I&#8217;ve forgotten who it was (it was here or on slashdot).</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74718">

			<div class="comment by-pat-cahalan ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://padraic2112.wordpress.com' rel='external nofollow ugc' class='url'>Pat Cahalan</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74718">
						November 16, 2007 11:29 AM					</a>

				</p>

				<p>DJB, as always, has something interesting to say, but he&#8217;s got more than a few fundamental assumptions in this paper that I find disconcerting.</p>
<p>&#8220;Furthermore, to the extent that measurements indicated a bottleneck (as they eventually did for the message files on busy sites), I should have addressed that problem at its source, fixing the filesystem rather than complicating every program that uses the filesystem.&#8221;</p>
<p>Absolutely true.  Totally irrelevant to the real world, and completely un-scalable.  If everybody wrote software like this, we&#8217;d have a bunch of completely unusable software; can you imagine if you had to install and use djbfs in order to run qmail, install and use httpfs in order to run apache, etc?  At some point, when writing software, the developer has to assume constraints; they can only use the system that they&#8217;re developing the software <em>for</em>.  DJB, on one hand, seems to understand this (&#8220;Why<br />
write the same code again?&#8221;) while simultaneously denying it.</p>
<p>The second complaint refers to the entire section 3.3, and is reflected by Alan&#8217;s comment above -&gt; Qmail is built to be secure (and built pretty well), but at the expense of&#8230; well, it&#8217;s difficult to use with anything else, but DJB won&#8217;t incorporate anything else into the base code itself.  Qmail sitting on version 1.03 since 1998 is not a recommendation.  Qmail itself might be as secure as all get-out, but if you want to do anything more complicated than receive mail from the entire world and deliver it directly, you have to bolt large pieces of other software onto qmail, which causes a number of problems.</p>
<p>In short, DJB thinks of security inside the context of his products.  Which is great, but he has fundamental problems dealing with both the system and the user, as evidenced by this paper.  If the system&#8217;s service (file service) is too slow to support qmail&#8217;s dependency on the file service, that&#8217;s the fault of the file service.  Fix the file service.  Since parsing is a difficult security problem, just don&#8217;t do it.</p>
<p>Well, if you build software while ignoring system dependencies and user requirements, it&#8217;s a lot easier to write secure software.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74719">

			<div class="comment by-rennie ">

				<p class="commentcredit">

					<span class="commenter">Rennie</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74719">
						November 16, 2007 11:30 AM					</a>

				</p>

				<p>partdavid:</p>
<p>The problem is, how does one implement anything useful as &#8220;untrusted code&#8221;?  If it has any mechanism of passing data back to &#8220;trusted code&#8221;, then it /can/ violate security.    This suggests that the whole system must be &#8220;untrusted&#8221; &#8212; which is essentially the same as the whole system being &#8220;trusted&#8221;, except that you admit that its behaviour can be Byzantine.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74720">

			<div class="comment by-dwayne ">

				<p class="commentcredit">

					<span class="commenter">Dwayne</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74720">
						November 16, 2007 12:10 PM					</a>

				</p>

				<p>Rennie, I suspect you haven&#8217;t read DJB&#8217;s paper in depth (his headings can be somewhat confusing).  He&#8217;s not suggesting doing away with all &#8220;trusted code&#8221;, he&#8217;s suggesting reducing the amount of trusted code through code reuse.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74721">

			<div class="comment by-brandioch-conner ">

				<p class="commentcredit">

					<span class="commenter">Brandioch Conner</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74721">
						November 16, 2007 12:12 PM					</a>

				</p>

				<p>@Bryan Feir<br />
&#8220;If your machine only accepts connections from trusted machines, then presumably you trust those machines not to use you as a relay or twist the SMTP commands in an attempt to cause a security breach.&#8221;</p>
<p>How do you validate that it is a &#8220;trusted&#8221; machine?</p>
<p>Look up &#8220;phishing&#8221; and &#8220;spoofing&#8221;.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74722">

			<div class="comment by-havvok ">

				<p class="commentcredit">

					<span class="commenter">havvok</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74722">
						November 16, 2007 12:18 PM					</a>

				</p>

				<p>@Pat Calahan<br />
Given DJBs track record, I can&#8217;t fault you for assuming that he would write and ship djbfs, but his argument is sound.  Rather than optimizing an FS for qmail, it would be better to develop a patch that optimizes the filesystem in general to leverage the perfomance benefits in all software that uses the filesystem.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74723">

			<div class="comment by-leonardo-herrera ">

				<p class="commentcredit">

					<span class="commenter">Leonardo Herrera</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74723">
						November 16, 2007 12:25 PM					</a>

				</p>

				<p>It seems that many people think that Daniel is saying that running applications with lesser privileges is wrong.  What he actually wrote is that this &#8220;principle of least privilege&#8221; is fundamentally wrong; that&#8217;s different in my opinion. Maybe he should elaborate more on this, because it is a fascinating read.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74724">

			<div class="comment by-milan ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.sindark.com' rel='external nofollow ugc' class='url'>Milan</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74724">
						November 16, 2007 12:36 PM					</a>

				</p>

				<p>Ah, that&#8217;s &#8216;q&#8217; mail, not &#8216;g&#8217; mail. Sorry for the irrelevant comment.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74725">

			<div class="comment by-pat-cahalan ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://padraic2112.wordpress.com' rel='external nofollow ugc' class='url'>Pat Cahalan</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74725">
						November 16, 2007 12:53 PM					</a>

				</p>

				<p>@ havvok</p>
<p>His argument isn&#8217;t sound.  Or rather, it does make complete sense, but it doesn&#8217;t apply to real world scenarios.</p>
<p>Yes, obviously, the right way to solve file system optimizations is in the file system.  But you cannot assume, when writing software, that you will be able to optimize the file system.</p>
<p>If you&#8217;re building a car, you can&#8217;t say, &#8220;Well, this suspension design is absolutely perfect for running on flat smooth roads.  It&#8217;s a pinnacle of suspension design, and thus ought not to be changed.  The fact that all roads are neither smooth nor flat isn&#8217;t the issue.  Now we need to go out and rebuild all of the roads that this car might run on to be flat smooth roads.&#8221;  Sure, flat smooth roads are great for lots of reasons, and we really ought to have flat smooth roads for all of those reasons, but the agenda of the people who are responsible for maintaining the roads isn&#8217;t your agenda.  Their priorities aren&#8217;t your priorities.</p>
<p>Yes, in a holistic sense, DJB is correct.  Practical life is much more ugly, however.</p>
<p>This is my problem with DJB&#8217;s design philosophy.  He builds his software inside of a system of constraints that are defined by the software.  When the software has to interact with the system, or the users, or anything outside of itself, the interface between the software and the outside world is constructed based upon the demands of the software without taking into account what is outside of it.  It&#8217;s very logical, very consistent, and very correct.  It also assumes that the rest of the universe will adapt to your constructs&#8217; needs.</p>
<p>If you&#8217;re building an end-to-end system, this is fine, and absolutely the right way to go.  You control the user interface, the software, the system, the hardware, and the network.  What you build is going to be excellent.  If you&#8217;re not building an end-to-end system (and who is, really?), you&#8217;re not only making assumptions, you&#8217;re making assumptions about what you can force the outside world to do, which is bad design.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74726">

			<div class="comment by-rr ">

				<p class="commentcredit">

					<span class="commenter">Rr</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74726">
						November 16, 2007 1:51 PM					</a>

				</p>

				<p>@partdavid &#8211;</p>
<p>It&#8217;s seems like a semantics game. While I agree that removing unnecessary functionality such as the screen door is a good thing, you don&#8217;t always have that option &#8211; and Dan recognizes that, no doubt. So if I read the paper right (in particular the example in section 5.2) a solution is to make the screen door invisible by mechanisms such as sandboxing &#8211; which to me is a least privilege control.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74727">

			<div class="comment by-cdmiller ">

				<p class="commentcredit">

					<span class="commenter">cdmiller</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74727">
						November 16, 2007 2:15 PM					</a>

				</p>

				<p>@Alan &#8220;Ever try to set up greylisting or spam filtering or amavisd or any other process to filter mail on it? It is painful. Most of them require a software hack to make them work correctly at all.&#8221;</p>
<p>Yes been there, done that, worked great.  The pain appears to be proportional to the skillset of the sysadmin tackling the task.  A mail server with 10 &#8211; 20 lines of configuration versus most other&#8217;s requiring 150+ lines of configuration&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74728">

			<div class="comment by-havvok ">

				<p class="commentcredit">

					<span class="commenter">havvok</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74728">
						November 16, 2007 3:00 PM					</a>

				</p>

				<p>@Pat Calahan<br />
From the qmail perspective, the requirement is to design a secure mail system.  Performance is a feature not a requirement.  In this case the design decision is made to leverage a trust relationship with the underlying platform to provide organization to the application configuration (i.e. hierarchal file system controls).</p>
<p>Since the author is leveraging a trust relationship that does not impact the security requirement, it is perfectly reasonable to say that the correct way to optimize this is to correct the platform issue, not the system issue.</p>
<p>From a practical perspective, this is also a reasonable solution as it allows the user to improve the performance of the system by addressing the bottleneck, which in this case the filesystem.  If the FS is too slow, the user can change FS within the operating system, use RAID, or offload it to a SAN that may provide better performance.  Like any well-designed modular system, the modules that can be swapped out are not just the end-user components, but components that host the system as well.  This can be accomplished with qmail to yield improvements without compromising qmail.</p>
<p>To extend your mechanical analogy, DJB is saying the car has extremely durable suspension assembly, but you are going to be in for a rough ride if you use the wrong springs.  If this is how the statement is made, which is more reasonable, replacing the springs, or the assembly?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74729">

			<div class="comment by-pat-cahalan ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://padraic2112.wordpress.com' rel='external nofollow ugc' class='url'>Pat Cahalan</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74729">
						November 16, 2007 4:17 PM					</a>

				</p>

				<p>@ havvok</p>
<blockquote><p>
  From the qmail perspective, the requirement is to design a secure mail system.
</p></blockquote>
<p>No, it&#8217;s not.</p>
<p>From the qmail perspective, the requirement is to design a secure MTA.  DJB did that, no argument.  In the late 90s, that was a laudable goal.  However, an MTA != mail system.</p>
<p>Look, I&#8217;m not saying that qmail is useless.  It&#8217;s definitely better than the comparative monstrosity that was Sendmail.  I&#8217;m saying that DJB&#8217;s design process belies prejudices, that&#8217;s all.  He has limitations with dealing with the boundary conditions of software (where it hits the system, and where it hits the users).</p>
<blockquote><p>
  In this case the design decision is made to leverage a trust relationship with the<br />
  underlying platform to provide organization to the application configuration<br />
  (i.e. hierarchal file system controls).
</p></blockquote>
<p>Yes, and as a result there is a dependency upon this trust relationship.  Which is fine, in and of itself, but DJB considers this to be unidirectional -&gt; Any security problem that exists outside of the actual qmail code is by definition not the fault of qmail, but qmail&#8217;s practical security depends upon outsourced trust.</p>
<p>I&#8217;m sorry, but I&#8217;ve always considered this to render his famous guarantee basically worthless.  If you outsource the trust of part of your design to something else, you don&#8217;t get to absolve yourself of responsibility of ensuring that the outsourcing provider isn&#8217;t secure.  Or, more to the point, you can absolve yourself of this responsibility (it is free software, after all), but then claiming that your software is &#8220;secure&#8221; is hardly justifiable.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74730">

			<div class="comment by-beryllium-sphere-llc ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.berylliumsphere.com/security_mentor' rel='external nofollow ugc' class='url'>Beryllium Sphere LLC</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74730">
						November 16, 2007 4:58 PM					</a>

				</p>

				<p>Dan Bernstein&#8217;s approach of identifying and isolating &#8220;trusted code&#8221; sounds a lot like OpenBSD&#8217;s &#8220;privilege separation&#8221;.</p>
<p>It gets confusing because of the example he gives of a JPEG renderer which is sandboxed by forking it into a process with quotas set to prevent file creation and so on. To me, that seems like a least privilege control.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74731">

			<div class="comment by-nix ">

				<p class="commentcredit">

					<span class="commenter">Nix</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74731">
						November 16, 2007 5:07 PM					</a>

				</p>

				<p>@Pat Cahalan, quite so. I suspect that this reinvent-everything habit of DJBs came first, and that the security justification is just that, a justification made after the fact. After all, qmail and all of DJB&#8217;s other projects assume a new daemon starting and monitoring tool to replace inetd et al, even a new non-Unixlike <em>filesystem layout</em> for goodness sake. I doubt DJB could reasonably state that putting binaries in /usr/{bin,sbin,libexec} is a security problem: he reinvented them because he just didn&#8217;t care how the existing system worked. Raging perfectionism can be useful sometimes, but over and over again in the design of qmail it proved extremely annoying and not especially helpful.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74732">

			<div class="comment by-ilya-o-levin ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.literatecode.com' rel='external nofollow ugc' class='url'>Ilya O. Levin</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74732">
						November 17, 2007 5:03 AM					</a>

				</p>

				<blockquote><p>
  I have become convinced that this &#8220;principle of least privilege??? is fundamentally wrong.
</p></blockquote>
<p>Iâ€™m looking forward to see the majority of security folks understand it. This principle is not only wrong, it is dangerous. Instead of solutions, it introduces other threats. Not to mention a misleading impact.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74733">

			<div class="comment by-steve-parker ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://steve-parker.org/' rel='external nofollow ugc' class='url'>Steve Parker</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74733">
						November 17, 2007 8:05 PM					</a>

				</p>

				<p>On &#8220;least privilege&#8221; &#8211; think about Solaris RBAC. You can say &#8220;these users can use printers&#8221;; &#8220;those users can use tapes&#8221;, &#8220;they can use CD/DVDs&#8221;, &#8220;admins can run shutdown&#8221;, and so on.</p>
<p>That&#8217;s all well and good, but what Dan is saying, is that you might be pretty careful about who you assign Admin privs to (they can run shutdown, after all), but you might give anybody access to printer-based commands. If there&#8217;s a bug in &#8220;lpstat&#8221;, they can all exploit it.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74734">

			<div class="comment by-john-simpson ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://qmail.jms1.net/' rel='external nofollow ugc' class='url'>John Simpson</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74734">
						November 18, 2007 1:18 AM					</a>

				</p>

				<p>Two points.</p>
<p>(1) For those who don&#8217;t know, qmail itself is structured as a set of little tiny programs, each handling one specific part of the overall &#8220;mail server&#8221; job. The only part which runs as root is &#8220;qmail-lspawn&#8221;, which starts local deliveries by setuid()&#8217;ing to the recipient&#8217;s userid and then exec()&#8217;ing &#8220;qmail-local&#8221; to do the delivery. Other than that, qmail does not run as root- in fact it has seven different userids and two group ids, to ensure that different parts of qmail can&#8217;t interfere with each others&#8217; data.</p>
<p>(2) Regarding his remarks about the &#8220;principle of least privilege&#8221;&#8230; I don&#8217;t think he was saying that it&#8217;s a bad idea in and of itself, but that many developers rely on it, to the exclusion of writing secure code to begin with. What I got out of it was that instead of spending so much effort trying to figure out how to minimize the damage which can be done by exploiting future bugs, developers should spend that effort to make their code bulletproof to begin with.</p>
<p>Of course, I think it&#8217;s even better to pursue both goals- writing better code, and structuring it to limit the damage which can be done by future bugs. Nobody&#8217;s perfect- I know I&#8217;ve found more than my fair share of bugs in my own code over the years&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74735">

			<div class="comment by-stephanie ">

				<p class="commentcredit">

					<span class="commenter">stephanie</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74735">
						November 18, 2007 1:13 PM					</a>

				</p>

				<p>Hm. DJB correctly cites Saltzer &amp; Schroeder 1975  for articulating least privilege, but doesn&#8217;t credit them for any of their seven other principles.  &#8220;Economy of mechanism&#8221; seems particularly apropos here&#8230;</p>
<p>This seems to match my general observations, though &#8211; lots of talk about least privilege, to the [near] exclusion of any of the other principles.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74736">

			<div class="comment by-cliff ">

				<p class="commentcredit">

					<span class="commenter">cliff</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74736">
						November 18, 2007 10:30 PM					</a>

				</p>

				<p>@Pat Calahan</p>
<blockquote>
<blockquote><p>
    From the qmail perspective, the requirement is to design a secure mail system. Performance is a feature not a requirement.
  </p></blockquote>
</blockquote>
<p>This is not true, performance is a requirement. I have been testing out self-destruct and other types of emails with security features from a new BigString.Com email account. And, it took one day for their emails to deliver and I cannot even open the attachments.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74737">

			<div class="comment by-nmonnet ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.altiva.fr' rel='external nofollow ugc' class='url'>NMONNET</a></span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74737">
						November 19, 2007 8:13 AM					</a>

				</p>

				<p>&#8220;qmail and all of DJB&#8217;s other projects assume a new daemon starting and monitoring tool to replace inetd et al,&#8221;</p>
<p>Pretty much, no, you can run most of qmail through inetd without changes to the binaries, basically. The interface of between tcpserver and its spawnees is the same as between inetd and its owns.<br />
What he did though is push the recipe further, and turned inetd into svscanboot/svscan/supervise/tcpserver, and it works rather nicely IMO.</p>
<p>&#8221; even a new non-Unixlike <em>filesystem layout</em> for goodness sake. I doubt DJB could reasonably state that putting binaries in /usr/{bin,sbin,libexec} is a security problem: he reinvented them because he just didn&#8217;t care how the existing system worked.&#8221;</p>
<p>djb&#8217;s tools don&#8217;t need no stinkin&#8217; layout ðŸ™‚ Seriously, I think he changed the layout <em>because he could</em> &#8230; IE his way of doing things is such that it doesn&#8217;t require a specific layout. And therefore is less prone to bugs involving them. Indeed, most tools work with i/o limited to:<br />
&#8211; cwd<br />
&#8211; env vars<br />
&#8211; standard input<br />
&#8211; standard outputs<br />
Additionally some tools read or write on a few unconventional fds.</p>
<p>&#8220;Raging perfectionism can be useful sometimes, but over and over again in the design of qmail it proved extremely annoying and not especially helpful.&#8221;</p>
<p>The main problem with djb is his unwillingness to release his work under an explicit free software license. He might have an unpleasant personality, but I can, and you should, get over it; overall it doesn&#8217;t matter, results do.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74738">

			<div class="comment by-cgomez ">

				<p class="commentcredit">

					<span class="commenter">CGomez</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74738">
						November 19, 2007 8:20 AM					</a>

				</p>

				<p>@derf:</p>
<p>&#8220;For example, there&#8217;s no valid reason for calc.exe in Windows to have read/write privilege to the network, hard drive, user files, memory locations of other programs, or any other location except possibly to access the clipboard.&#8221;</p>
<p>You&#8217;ve pretty much nailed it.  However, there is a lot of work to do here, and for now it&#8217;s being pawned off on the developer.  You, as developer, decide what privileges to assert and what to deny yourself.  That&#8217;s a good start, but the problem is most developers are not paid to think about these things.  They are paid to ship&#8230; ship&#8230; ship.</p>
<p>The corporate mindset is <em>still</em> &#8220;who wants to attack us?  no one is interested in us&#8230;&#8221; and developers are told there&#8217;s no time to think about such trivial things as what privileges does our application <em>really</em> need.</p>
<p>Least privilege is what you as a user have to defend yourself from code you want to use, but can&#8217;t trust.  Sorry, but we want to use code we don&#8217;t completely trust all the time&#8230; web sites, emails, games&#8230;</p>
<p>And the makers of these things, especially games, know that you want to use them so much more than anything else that they can print right on the box &#8220;requires administrator rights&#8221; and you will still buy it and play it!  If those games were boycotted, then there&#8217;s one development industry that would have to clean up its act.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-74739">

			<div class="comment by-tomi-po ">

				<p class="commentcredit">

					<span class="commenter">Tomi Po</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74739">
						November 30, 2007 5:24 AM					</a>

				</p>

				<p>DJB is right. I think he means that minimizing privileges of the running code is fundamentally wrong, because it does not enforce a quality of the code.</p>
<p>Minimizing privileges is a reaction to the bad code in order to minimize the damages. Same applies to firewalls and other &#8220;security software&#8221; that try to block the malicious code. They don&#8217;t fix the code they are trying to protect. All security software would be totally unnecessary if the code they are trying to protect would be good enough not to accept input that can break the code.</p>
<p>I think he is saying that we should concentrate on the code we are writing instead of laying our trust on principles and security frameworks.<br />
Please don&#8217;t think: &#8220;I have used X, so I must be safe&#8221;. If you can&#8217;t do that, maybe you shouldn&#8217;t be a software developer.</p>
<p>He is saying that if we really know what we are doing it will lead to simpler software, with less code and less bugs. It&#8217;s about improving programmers. That&#8217;s what code minimization is all about.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-74740">

			<div class="comment by-tomi-po ">

				<p class="commentcredit">

					<span class="commenter">Tomi Po</span> â€¢

					<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/#comment-74740">
						November 30, 2007 6:43 AM					</a>

				</p>

				<p>â€œProblems cannot be solved from the same state of awareness that created them???. âˆ’Albert Einstein</p>
<p>Someone else said &#8220;Problems cannot be solved by the same process that created them&#8221;.</p>
<p>We can&#8217;t fix software bugs by writing more software.</p>
<p>So, if there is a one bug per N lines and you&#8217;ll add XN lines in order to improve security, it&#8217;s likely that you have only added X bugs into your code.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

	<p class="subscribe-comments">
		<a href="https://www.schneier.com/blog/archives/2007/11/thoughts_on_the.html/feed/">
			<img alt="Atom Feed" src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/rss.png">
			Subscribe to comments on this entry		</a>
	</p>

		<div id="respond" class="comment-respond">
		<h2 class="comments-open-header">Leave a comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="/blog/archives/2007/11/thoughts_on_the.html#respond" style="display:none;">Cancel reply</a></small></h2><form action="https://www.schneier.com/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><a href="https://www.schneier.com/wp-login.php?redirect_to=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2007%2F11%2Fthoughts_on_the.html" title="Login">Login</a><p class="comment-form-author"><label for="author">Name</label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" /></p>
<p class="comment-form-email"><label for="email">Email</label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" /></p>
<p class="comment-form-url"><label for="url">URL:</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="comment-form-cookies-consent"><input id="wp-comment-cookies-consent" name="wp-comment-cookies-consent" type="checkbox" value="yes" /> <label for="wp-comment-cookies-consent">Remember personal info?</label></p>

<p class="comment-form-author">

	<label for="comm_capt_challenge">
		Fill in the blank: the name of this blog is Schneier on ___________ (required):	</label>

	<input id="comm_capt_challenge" name="comm_capt_challenge" size="30" type="text" />
</p>

<div class="comment-form-comment">

	<label for="comment">Comments:</label>

	<textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea>

	<div id="preview-box" class="preview-box hide"></div>
	<img class="comment-loading hide" src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/loader.gif" />

</div>

<p id="allowed">

	<strong>Allowed HTML</strong>
	&lt;a href=&quot;URL&quot;&gt; &bull; &lt;em&gt; &lt;cite&gt; &lt;i&gt; &bull; &lt;strong&gt; &lt;b&gt; &bull; &lt;sub&gt; &lt;sup&gt; &bull; &lt;ul&gt; &lt;ol&gt; &lt;li&gt; &bull; &lt;blockquote&gt; &lt;pre&gt;
	<strong>Markdown Extra</strong> syntax via <a href="https://michelf.ca/projects/php-markdown/extra/">https://michelf.ca/projects/php-markdown/extra/</a>
</p>

<input type="hidden" id="wp_comment_nonce" name="wp_comment_nonce" value="4b1534b792" /><input type="hidden" name="_wp_http_referer" value="/blog/archives/2007/11/thoughts_on_the.html" />
<input type="button" id="comment-preview" class="comment-preview comment-actions" value="Preview" />
<input type="button" id="comment-write" class="comment-write comment-actions hide" value="Edit" />

<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Submit" /> <input type='hidden' name='comment_post_ID' value='1916' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p></form>	</div><!-- #respond -->
	
	<div class="stepthrough">
		<a href="https://www.schneier.com/blog/archives/2007/11/the_overblown_t.html" rel="prev">â† The Overblown Threat of Suitcase Nukes</a>		<a href="https://www.schneier.com/blog/archives/2007/11/possible_hizbul.html" rel="next">Possible Hizbullah Mole Inside the FBI and CIA â†’</a>	</div>

	
<p id="powered">Sidebar photo of Bruce Schneier by Joe MacInnis.</p>
		</div>

		
<aside>
	<div class="sidebar" id="sidebar-two">
		<section><div class="sidesection widget widget_schneier_about" id="schneier_about-2"><h3>About Bruce Schneier</h3><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/Bruce-Schneier.jpg" /><p><p class="small">I am a <a href="https://public-interest-tech.com/">public-interest technologist</a>, working at the intersection of security, technology, and people. I've been writing about security issues on my <a href="/">blog</a> since 2004, and in my monthly <a href="/crypto-gram/">newsletter</a> since 1998. I'm a fellow and lecturer at Harvard's <a href="https://www.hks.harvard.edu/faculty/bruce-schneier">Kennedy School</a>, a board member of <a href="https://www.eff.org/">EFF</a>, and the Chief of Security Architecture at <a href="https://inrupt.com/">Inrupt, Inc.</a> This personal website expresses the opinions of none of those organizations.</p>
</p></div></section><section><div class="sidesection widget widget_schneier_related_posts" id="schneier_related_posts-2"><h3>Related Entries</h3>
<ul>

	<li><a href="https://www.schneier.com/blog/archives/2021/03/illegal-content-and-the-blockchain.html">Illegal Content and the Blockchain</a></li><li><a href="https://www.schneier.com/blog/archives/2021/03/national-security-risks-of-late-stage-capitalism.html">National Security Risks of Late-Stage Capitalism</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/weis-2021-call-for-papers.html">WEIS 2021 Call for Papers</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/ransomware-profitability.html">Ransomware Profitability</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/presidential-cybersecurity-and-pelotons.html">Presidential Cybersecurity and Pelotons</a></li><li><a href="https://www.schneier.com/blog/archives/2021/01/police-have-disrupted-the-emotet-botnet.html">Police Have Disrupted the Emotet Botnet</a></li>
</ul>
</div></section><section><div class="sidesection widget widget_schneier_featured_essays" id="schneier_featured_essays-2"><h3>Featured Essays</h3>
	<ul>
		<li><a href="https://www.schneier.com/essays/archives/2016/04/the_value_of_encrypt.html">The Value of Encryption</a></li><li><a href="https://www.schneier.com/essays/archives/2016/03/data_is_a_toxic_asse.html">Data Is a Toxic Asset, So Why Not Throw It Out?</a></li><li><a href="https://www.schneier.com/essays/archives/2014/01/how_the_nsa_threaten.html">How the NSA Threatens National Security</a></li><li><a href="https://www.schneier.com/essays/archives/2009/01/terrorists_may_use_g.html">Terrorists May Use Google Earth, But Fear Is No Reason to Ban It</a></li><li><a href="https://www.schneier.com/essays/archives/2007/01/in_praise_of_securit.html">In Praise of Security Theater</a></li><li><a href="https://www.schneier.com/essays/archives/2006/08/refuse_to_be_terrori.html">Refuse to be Terrorized</a></li><li><a href="https://www.schneier.com/essays/archives/2006/05/the_eternal_value_of.html">The Eternal Value of Privacy</a></li><li><a href="https://www.schneier.com/essays/archives/2005/09/terrorists_dont_do_m.html">Terrorists Don&#039;t Do Movie Plots</a></li>	</ul>

	<p><a href="https://www.schneier.com/essays/">More Essays</a></p></div></section><section><div class="sidesection widget widget_schneier_archives" id="schneier_archives-2"><h3>Blog Archives</h3>
<ul>

	<li><a href="https://www.schneier.com/blog/calendar.html/">Archive by Month</a></li><li><a href="https://www.schneier.com/blog/newcomments.html/">100 Latest Comments</a></li></ul>

<h4>Blog Tags</h4><ul class="top-tags"><li><a href="https://www.schneier.com/tag/3d-printers/">3d printers</a></li><li><a href="https://www.schneier.com/tag/9-11/">9/11</a></li><li><a href="https://www.schneier.com/tag/aaron-swartz/">Aaron Swartz</a></li><li><a href="https://www.schneier.com/tag/academic/">academic</a></li><li><a href="https://www.schneier.com/tag/academic-papers/">academic papers</a></li><li><a href="https://www.schneier.com/tag/accountability/">accountability</a></li><li><a href="https://www.schneier.com/tag/aclu/">ACLU</a></li><li><a href="https://www.schneier.com/tag/activism/">activism</a></li><li><a href="https://www.schneier.com/tag/adobe/">Adobe</a></li><li><a href="https://www.schneier.com/tag/advanced-persistent-threats/">advanced persistent threats</a></li><li><a href="https://www.schneier.com/tag/adware/">adware</a></li><li><a href="https://www.schneier.com/tag/aes/">AES</a></li><li><a href="https://www.schneier.com/tag/afghanistan/">Afghanistan</a></li><li><a href="https://www.schneier.com/tag/air-marshals/">air marshals</a></li><li><a href="https://www.schneier.com/tag/air-travel/">air travel</a></li><li><a href="https://www.schneier.com/tag/airgaps/">airgaps</a></li><li><a href="https://www.schneier.com/tag/al-qaeda/">al Qaeda</a></li><li><a href="https://www.schneier.com/tag/alarms/">alarms</a></li><li><a href="https://www.schneier.com/tag/algorithms/">algorithms</a></li><li><a href="https://www.schneier.com/tag/alibis/">alibis</a></li><li><a href="https://www.schneier.com/tag/amazon/">Amazon</a></li><li><a href="https://www.schneier.com/tag/android/">Android</a></li><li><a href="https://www.schneier.com/tag/anonymity/">anonymity</a></li><li><a href="https://www.schneier.com/tag/anonymous/">Anonymous</a></li><li><a href="https://www.schneier.com/tag/antivirus/">antivirus</a></li><li><a href="https://www.schneier.com/tag/apache/">Apache</a></li><li><a href="https://www.schneier.com/tag/apple/">Apple</a></li><li><a href="https://www.schneier.com/tag/applied-cryptography/">Applied Cryptography</a></li><li><a href="https://www.schneier.com/tag/artificial-intelligence/">artificial intelligence</a></li><li><a href="https://www.schneier.com/tag/assassinations/">assassinations</a></li></ul><p><a href="https://www.schneier.com/blog/tags.html/">More Tags</a></p></div></section><section><div class="sidesection widget widget_schneier_latest_book" id="schneier_latest_book-3"><h3>Latest Book</h3><a href="https://www.schneier.com/books/click-here/"><img class="sidepic" alt="Click Here to Kill Everybody" src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2018/07/book-ch2-200w.png" /></a><p><a href="https://www.schneier.com/books/">More Books</a></p></div></section><section><div class="sidesection widget widget_schneier_promotion" id="schneier_promotion-2">
<a href="https://www.eff.org/issues/bloggers/legal/join">
	<img src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/join-eff@2x.png" id="effbutton" alt="Support Bloggers' Rights!" title="Support Bloggers' Rights!" /></a>

<a href="https://npo.networkforgood.org/Donate/Donate.aspx?npoSubscriptionId=8252">
	<img src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/support-epic@2x.png" alt="Defend Privacy--Support Epic" title="Defend Privacy--Support Epic" /></a>
</div></section>	</div>
</aside>

		<footer>
			<nav>
				<div class="nav" id="footer-nav">
					<div class="menu-main-menu-container"><ul id="menu-main-menu-1" class="menu"><li class="menu1 menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-50175 current-menu-item"><a href="https://www.schneier.com">Blog</a></li>
<li class="menu2 menu-item menu-item-type-post_type menu-item-object-page menu-item-50916"><a href="https://www.schneier.com/crypto-gram/">Newsletter</a></li>
<li class="menu3 menu-item menu-item-type-post_type menu-item-object-page menu-item-50166"><a href="https://www.schneier.com/books/">Books</a></li>
<li class="menu4 menu-item menu-item-type-custom menu-item-object-custom menu-item-50169"><a href="https://www.schneier.com/essays/">Essays</a></li>
<li class="menu5 menu-item menu-item-type-custom menu-item-object-custom menu-item-50170"><a href="https://www.schneier.com/news/">News</a></li>
<li class="menu6 menu-item menu-item-type-custom menu-item-object-custom menu-item-50171"><a href="https://www.schneier.com/talks/">Talks</a></li>
<li class="menu7 menu-item menu-item-type-post_type menu-item-object-page menu-item-50167"><a href="https://www.schneier.com/academic/">Academic</a></li>
<li class="menu8 menu-item menu-item-type-post_type menu-item-object-page menu-item-50174"><a href="https://www.schneier.com/blog/about/">About Me</a></li>
</ul></div>				</div>
			</nav>
		</footer>

		</div><!--#main-->
	</div><!--#wrapper-->

		<script type="text/javascript">
		(function () {
			var c = document.body.className;
			c = c.replace(/woocommerce-no-js/, 'woocommerce-js');
			document.body.className = c;
		})();
	</script>
	<script type='text/javascript' src='https://c0.wp.com/p/woocommerce/5.1.0/assets/js/jquery-cookie/jquery.cookie.min.js' id='jquery-cookie-js'></script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/vendor/socialshareprivacy/js/socialshareprivacy.js?ver=1.0.1' id='social-share-privacy-js'></script>
<script type='text/javascript' id='social-share-privacy-icons-js-extra'>
/* <![CDATA[ */
var schneierSocial = {"path":"https:\/\/www.schneier.com\/wp-content\/themes\/schneier\/assets\/vendor\/socialshareprivacy\/"};
/* ]]> */
</script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/vendor/socialshareprivacy/js/icons.js?ver=1.0.0' id='social-share-privacy-icons-js'></script>
<script type='text/javascript' id='schneier-comment-js-extra'>
/* <![CDATA[ */
var schneierComment = {"translateErrorSecurityAnswerWrong":"Your response to the challenge question ('The name of this blog is Schneier on ____') was not correct. Please try again.","ajax_url":"https:\/\/www.schneier.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/js/comment.js?ver=1.0.1' id='schneier-comment-js'></script>
<script type='text/javascript' src='https://c0.wp.com/c/5.7/wp-includes/js/wp-embed.min.js' id='wp-embed-js'></script>

</body>

</html>
