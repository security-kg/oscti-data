<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<title>Wanted: Skein Hardware Help - Schneier on Security</title>
	<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel='dns-prefetch' href='//c0.wp.com' />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Feed" href="https://www.schneier.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Comments Feed" href="https://www.schneier.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Wanted: Skein Hardware Help Comments Feed" href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/feed/" />
<link rel='stylesheet' id='wp-block-library-css'  href='https://c0.wp.com/c/5.7/wp-includes/css/dist/block-library/style.min.css' type='text/css' media='all' />
<style id='wp-block-library-inline-css' type='text/css'>
.has-text-align-justify{text-align:justify;}
</style>
<style id='woocommerce-inline-inline-css' type='text/css'>
.woocommerce form .form-row .required { visibility: visible; }
</style>
<link rel='stylesheet' id='schneier-css'  href='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/style.css?ver=1.0.0' type='text/css' media='all' />
<link rel='stylesheet' id='schneier-main-css'  href='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/dist/css/style.css?ver=1.0.2' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='https://c0.wp.com/p/jetpack/9.5.2/css/jetpack.css' type='text/css' media='all' />
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js?ver=3.5.1' id='jquery-js'></script>
<link rel="https://api.w.org/" href="https://www.schneier.com/wp-json/" /><link rel="alternate" type="application/json" href="https://www.schneier.com/wp-json/wp/v2/posts/3547" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.schneier.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.schneier.com/wp-includes/wlwmanifest.xml" /> 

<link rel="canonical" href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html" />
<link rel='shortlink' href='https://www.schneier.com/?p=3547' />
<link rel="alternate" type="application/json+oembed" href="https://www.schneier.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2010%2F09%2Fwanted_skein_ha.html" />
<link rel="alternate" type="text/xml+oembed" href="https://www.schneier.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2010%2F09%2Fwanted_skein_ha.html&#038;format=xml" />
	<noscript><style>.woocommerce-product-gallery{ opacity: 1 !important; }</style></noscript>
	<link rel="icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-32x32.png" sizes="32x32" />
<link rel="icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-180x180.png" />
<meta name="msapplication-TileImage" content="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-270x270.png" />
		<style type="text/css" id="wp-custom-css">
			#schneier_promotion-2 img {
    max-width: 180px;
}		</style>
		</head>

<body class="post-template-default single single-post postid-3547 single-format-standard theme-schneier woocommerce-no-js">

	<div id="wrapper">
		<div id="main">

			<header>
				<div id="header">
					<h1>
						<a href="https://www.schneier.com/" rel="home">
							Schneier on Security						</a>
					</h1>
				</div>
			</header>

			<nav>
				<div class="nav" id="header-nav">
					<div class="menu-main-menu-container"><ul id="menu-main-menu" class="menu"><li id="menu-item-50175" class="menu1 menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-50175 current-menu-item"><a href="https://www.schneier.com">Blog</a></li>
<li id="menu-item-50916" class="menu2 menu-item menu-item-type-post_type menu-item-object-page menu-item-50916"><a href="https://www.schneier.com/crypto-gram/">Newsletter</a></li>
<li id="menu-item-50166" class="menu3 menu-item menu-item-type-post_type menu-item-object-page menu-item-50166"><a href="https://www.schneier.com/books/">Books</a></li>
<li id="menu-item-50169" class="menu4 menu-item menu-item-type-custom menu-item-object-custom menu-item-50169"><a href="https://www.schneier.com/essays/">Essays</a></li>
<li id="menu-item-50170" class="menu5 menu-item menu-item-type-custom menu-item-object-custom menu-item-50170"><a href="https://www.schneier.com/news/">News</a></li>
<li id="menu-item-50171" class="menu6 menu-item menu-item-type-custom menu-item-object-custom menu-item-50171"><a href="https://www.schneier.com/talks/">Talks</a></li>
<li id="menu-item-50167" class="menu7 menu-item menu-item-type-post_type menu-item-object-page menu-item-50167"><a href="https://www.schneier.com/academic/">Academic</a></li>
<li id="menu-item-50174" class="menu8 menu-item menu-item-type-post_type menu-item-object-page menu-item-50174"><a href="https://www.schneier.com/blog/about/">About Me</a></li>
</ul></div>				</div>
			</nav>

			
<aside>
	<div class="sidebar" id="sidebar-one">
		<section><div class="sidesection widget widget_schneier_search" id="schneier_search-3"><h3>Search</h3>
<p class="small">
	<em>Powered by <a href="https://duckduckgo.com/">DuckDuckGo</a></em></p>

<form method="get" action="https://duckduckgo.com/">

	<input type="hidden" name="kh" value="1" /><!-- use https -->

	<input id="search" name="q" size="15" maxlength="255" />

	<input type="submit" value="Go" /><br>

	<input type="radio" name="sites" id="searchblog" value="www.schneier.com/blog" />
	<label for="searchblog">Blog</label>

	<input type="radio" name="sites" id="searchessays" value="www.schneier.com/essays" />
	<label for="searchessays">Essays</label>

	<input type="radio" name="sites" id="searchall" value="www.schneier.com" checked="" />
	<label for="searchall">Whole site</label>

</form>
</div></section><section><div class="sidesection widget widget_schneier_social" id="schneier_social-2"><h3>Subscribe</h3>
<div id="subscription-buttons">

	<a href="https://www.schneier.com/feed/atom"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/rss-32px.png" alt="Atom Feed" /></a><a href="https://www.facebook.com/bruce.schneier"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/facebook-32px.png" alt="Facebook" /></a><a href="https://twitter.com/schneierblog/"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/twitter-32px.png" alt="Twitter" /></a><a href="https://www.amazon.com/Schneier-on-Security/dp/B0053HDDWW/"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/kindle-32px.png" alt="Kindle" /></a><a href="https://www.schneier.com/crypto-gram"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/email-32px.png" alt="E-Mail Newsletter (Crypto-Gram)" /></a>
</div>
</div></section>	</div>
</aside>

			<div id="content">

				
		<p id="breadcrumbs">

			<a href="https://www.schneier.com">Home</a><a href="https://www.schneier.com/blog/archives/">Blog</a>		</p>

		
<article id="post-3547" class="post-3547 post type-post status-publish format-standard hentry category-uncategorized tag-academic-papers tag-cryptography tag-hardware tag-hashes tag-nist tag-schneier-news tag-sha-3 tag-skein">

	<div class="article">

		<h2 class="entry">Wanted: Skein Hardware Help</h2>
		<p>As part of NIST&#8217;s <a href="http://csrc.nist.gov/groups/ST/hash/sha-3/index.html">SHA-3 selection process</a>, people have been implementing the candidate hash functions on a variety of hardware and software platforms.  Our team has implemented Skein in Intel&#8217;s 32 nm ASIC process, and got some impressive performance results (<a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/presentations/WALKER_skein-intel-hwd-slides.pdf">presentation</a> and <a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/papers/WALKER_skein-intel-hwd.pdf">paper</a>). Several other groups have implemented Skein in FPGA and ASIC, and have seen significantly poorer performance.  We need help understanding why.</p>
<p>For example, a group led by Brian Baldwin at the Claude Shannon Institute for Discrete Mathematics, Coding and Cryptography implemented all the second-round candidates in FPGA (<a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/presentations/BALDWIN_FPGA_SHA3.pdf">presentation</a> and <a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/papers/BALDWIN_FPGA_SHA3.pdf">paper</a>). Skein performance was terrible, but  when they checked their code, they found an error.  Their corrected performance comparison (<a href="http://www.ucc.ie/en/crypto/SHA-3Hardware/NISTSHA-3/Baldwin-SHA-3-Presentation-Aug-2010.pdf">presentation</a> and <a href="http://www.ucc.ie/en/crypto/SHA-3Hardware/NISTSHA-3/Baldwin-SHA-3-Paper-Aug-2010.pdf">paper</a>) has Skein performing much better and in the top ten.</p>
<p>We suspect that the adders in all the designs may not be properly optimized, although there may be other performance issues. If we can at least identify (or possibly even fix) the slowdowns in the design, it would be very helpful, both for our understanding and for Skein&#8217;s hardware profile. Even if we find that the designs are properly optimized, that would also be good to know.</p>
<p>A group at George Mason University led by Kris Gaj implemented all the second-round candidates in FPGA (<a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/presentations/GAJ_SHA3_GMU.pdf">presentation</a>, <a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/papers/GAJ_SHA3_512.pdf">paper</a>, and <a href="http://eprint.iacr.org/2010/445.pdf">much longer paper</a>).  Skein had the worst performance of any of the implementations.  We&#8217;re looking for someone who can help us understand the design, and determine if it can be improved.</p>
<p>Another group, led by Stefan Tillich at University of Bristol, implemented all the candidates in 180 nm custom ASIC (<a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/presentations/TILLICH_WEB_Uniform_SHA-3.pdf">presentation</a> and <a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/papers/TILLICH_sha3hw.pdf">paper</a>). Here, Skein is one of the worst performers.  We&#8217;re looking for someone who can help us understand what this group did.</p>
<p>Three other groups &#8212; one led by Patrick Schaumont of Virginia Tech (<a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/presentations/SCHAUMONT_VT_presentation.pdf">presentation</a> and <a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/papers/SCHAUMONT_SHA3.pdf">paper</a>), another led by Shin&#8217;ichiro Matsuo at National Institute of Information and Communications Technology in Japan (<a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/presentations/MATSUO_SHA3_Presentation.pdf">presentation</a> and <a href="http://csrc.nist.gov/groups/ST/hash/sha-3/Round2/Aug2010/documents/papers/MATSUO_SHA-3_Criteria_Hardware_revised.pdf">paper</a>), and a third led by Luca Henzen at ETH Zurich (<a href="http://www.vlsi.uwaterloo.ca/~ahasan/web_papers/technical_reports/web_five_SHA_3.pdf">paper</a> with <a href="http://www.vlsi.uwaterloo.ca/~ahasan/web_papers/technical_reports/web_five_SHA_3_appendix_B.pdf">appendix</a>, and <a href="http://www.springerlink.com/content/g0115v3272156r06/">conference version</a>) &#8212; implemented the SHA-3 candidates.  Again, we need help understanding how their Skein performance numbers are so different from ours.</p>
<p>We&#8217;re looking for people with FPGA and ASIC skills to work with the Skein team.  We don&#8217;t have money to pay anyone; co-authorship on a paper (and a <a href="http://www.schneier.com/skein-shirts.html">Skein polo shirt</a>) is our primary reward.  Please send me e-mail if you&#8217;re interested.</p>

		
			<p class="entry-tags">
				<span class="tags-links">Tags: <a href="https://www.schneier.com/tag/academic-papers/" rel="tag">academic papers</a>, <a href="https://www.schneier.com/tag/cryptography/" rel="tag">cryptography</a>, <a href="https://www.schneier.com/tag/hardware/" rel="tag">hardware</a>, <a href="https://www.schneier.com/tag/hashes/" rel="tag">hashes</a>, <a href="https://www.schneier.com/tag/nist/" rel="tag">NIST</a>, <a href="https://www.schneier.com/tag/schneier-news/" rel="tag">Schneier news</a>, <a href="https://www.schneier.com/tag/sha-3/" rel="tag">SHA-3</a>, <a href="https://www.schneier.com/tag/skein/" rel="tag">Skein</a></span>			</p>

		
		
		<p class="posted">
			<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html" rel="bookmark">Posted on September 1, 2010 at 1:17 PM</a>			‚Ä¢
			<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html#comments">42 Comments</a>		</p>

		<aside><div class="schneier-share share" data-uri="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html" data-title="Wanted: Skein Hardware Help" data-order="facebook twitter tumblr" data-social-share-privacy="true" /></aside>
	</div>

</article>


	<h3 id="comments">Comments</h3>

	
		<article class="comment even thread-even depth-1" id="comment-144511">

			<div class="comment by-grande-mocha ">

				<p class="commentcredit">

					<span class="commenter">Grande Mocha</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144511">
						September 1, 2010 1:40 PM					</a>

				</p>

				<p>I suspect that you won&#8217;t see great performance coming out of FPGA models of Skein.  I don&#8217;t know of any existing FPGA products which have 64-bit adders as basic building blocks, so the 64-bit adders in Skein are being built from the existing smaller adders plus some FPGA cells needed for the routing and carry propagation.</p>
<p>On the other hand, your ASIC models were probably using Intel&#8217;s highly optimized 64-bit adders (one member of the Skein team is an Intel employee, right?), so those numbers are going to be substantially faster than anything that comes from an FPGA.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144512">

			<div class="comment by-james ">

				<p class="commentcredit">

					<span class="commenter">James</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144512">
						September 1, 2010 1:43 PM					</a>

				</p>

				<p>I find the discrepancies interesting for the reason that they seem to highlight that implementations have such a large effect and possible security problems, that it seems to validate everything that has ever been said about the implementation being very critical to ensure security.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144513">

			<div class="comment by-awalls ">

				<p class="commentcredit">

					<span class="commenter">awalls</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144513">
						September 1, 2010 4:28 PM					</a>

				</p>

				<p>Looking at GMU&#8217;s much longer paper, table 4.2 shows that the high throughput algorithms <em>should</em> all have a good ratio of bits processed at a time (block size) to the multiplier multiplier on N or T (corresponding to the iterations to do the rounds).</p>
<p>&#8220;Why did the SIMD designs in aggregate do so poorly?&#8221; is another question to ask.  For which the authors give no reason in table 4.3.</p>
<p>I will note in table 4.3 Skein&#8217;s performance was the most predictable with little or no relative difference from the predictions.  It looks like the automated design tools simply may not have been able to optimize the Skein implementation beyond the  design in section 3.17.</p>
<p>Section 2.6 has an interesting comment on the design choice:<br />
&#8220;The Controller is implemented<br />
using three main Finite State Machines, working in parallel, and responsible for the Input,<br />
Main Processing, and the Output, respectively. As a result, each circuit can simultaneously<br />
perform the following three tasks: output hash value for the previous message, process a<br />
current block of data, and read the next block of data. The parameters of the interface are<br />
selected in such a way that the time necessary to process one block of data is always larger<br />
or equal to the time necessary to read the next block of data.&#8221;</p>
<p>That design decision seems like it might favor algorithms that work on long input blocks and algorithms that has rounds that can be unrolled easily (at least for throughput performance).</p>
<p>(Or maybe that was all just obvious&#8230;)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144514">

			<div class="comment by-awalls ">

				<p class="commentcredit">

					<span class="commenter">awalls</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144514">
						September 1, 2010 4:57 PM					</a>

				</p>

				<p>Huh, the ETH Zurich paper showed how to a better throughput/area for Skein: don&#8217;t unroll the rounds at all.</p>
<p>It appears to show that Skein is a good choice for  area constrained applications (where one doesn&#8217;t mind lower throughput) since it&#8217;s compression function is so regular.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144515">

			<div class="comment by-user1 ">

				<p class="commentcredit">

					<span class="commenter">User1</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144515">
						September 1, 2010 6:21 PM					</a>

				</p>

				<p>The GMU team aren&#8217;t performing any FPGA-specific optimizations (&#8220;we have decided to opt out of using any dedicated resources&#8221;) and so are comparing 2001-era implementations.</p>
<p>Since they aren&#8217;t attempting to extrapolate the FPGA results to an ASIC equivalent (dangerous to do so in any case) their results are fairly meaningless. I imagine skein would make good use of embedded DSP slices, as well as some non-vanilla fast adder implementations.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144517">

			<div class="comment by-doug-coulter ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.coultersmithing.com/forums' rel='external nofollow ugc' class='url'>Doug Coulter</a></span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144517">
						September 1, 2010 8:28 PM					</a>

				</p>

				<p>If I understand the above, a problem is these wide adders.  As someone once tasked with making very fast synchronous counters (similar problem) I can say &#8212; it gets bad fast with carry propagation, and you wind up with a pretty deep lookahead tree if you do it that way.  Very resource intensive.</p>
<p>However, if you could, for example, use the output in chunks as they become available (eg first byte is ready quick, then second and so on) then you might get a good speedup.  Depends on whether subsequent stages can also roll with this.</p>
<p>Pipelining, but &#8220;sideways&#8221;.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144518">

			<div class="comment by-clive-robinson ">

				<p class="commentcredit">

					<span class="commenter">Clive Robinson</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144518">
						September 1, 2010 10:39 PM					</a>

				</p>

				<p>@ Bruce,</p>
<p>As the Skein groups results are considerably better than others perhaps instead of asking what others did wrong you should ask what you did right.</p>
<p>I&#8217;m assuming you did not just do a vanilla design but used some optimizations in the ASIC design.</p>
<p>Understanding what the optomisations effects are might well answer the questions.</p>
<p>Also what are the criteria for the various designs ie speed, through put, silicon real estate etc.</p>
<p>Also are you measuring like with like?</p>
<p>In a highly piplined design end to end propagation time can be of minor consequence when you have a hundred or more identical operations to perform in series which is often what a hash is used for.</p>
<p>That is the (delay) time for a single operation to get through may be long but the time between operations being output is very very short thus the start and stop delays caused by the long delay time are minor in comparison to the total time to do a hundred or so operations.</p>
<p>As Doug Coulter notes sometimes you have to think sideways when it comes to carry forward.</p>
<p>I once had to work on a project that involved multiple additions of very large integers mad as it might sound the solution was to build a bunch of very low gate count &#8220;serial adders&#8221; and &#8220;cascade them&#8221; so they where all adding together but delayed by one bit. Then roll this &#8220;weird optimization&#8221; back through the design such that the first adder would start on the next addition before the last adder was finished with the previous addition. This way the adder array was working at max throughput all the time and the delay between results was one bit addition time.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144519">

			<div class="comment by-joachims ">

				<p class="commentcredit">

					<span class="commenter">JoachimS</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144519">
						September 2, 2010 1:20 AM					</a>

				</p>

				<p>Aloha!</p>
<p>(First: Bruce, the links for the Intel paper is wrong, it points to the PDF with the slides.)</p>
<p>Would it be possible for the Skein/Intel team to release their RTL code (Verilog, SystemVerilog or VHDL)? This would allow us HW guys to try and map the design to FPGAs and do a better apples to grapes comparison.</p>
<p>Or, is the implementation so hardwired (litterally &#8211; a tech specific gate level design) to the target technology that it wouldn&#8217;t be meaningful.</p>
<p>AFAIK no FPGA vendor today includes hard macros for fast adders beyond 48 bits, normally they are 36 bit at most.</p>
<p>Cheers!</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144520">

			<div class="comment by-jon ">

				<p class="commentcredit">

					<span class="commenter">Jon</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144520">
						September 2, 2010 1:41 AM					</a>

				</p>

				<p>Macros can be written.  VHDL is your friend.</p>
<p>J.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144521">

			<div class="comment by-robert ">

				<p class="commentcredit">

					<span class="commenter">Robert</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144521">
						September 2, 2010 3:08 AM					</a>

				</p>

				<p>Bruce,<br />
   You might be looking in the wrong spot for the differences because the source of delays in 32nm is very different from FPGA or even 180nm ASIC&#8217;s</p>
<p>Below 90nm most of the delay is due to routing resistance and parasitic ILD (inter level dielectric) capacitance. I assume the metal is copper and the ILD is probably very low K material, (black diamond maybe)</p>
<p>By contrast in a 180nm implementation delay will  be determined mainly by the gate delay.</p>
<p>If the routing has not been optimized than the speed, area and power differences could be substantial and depend a lot on the exact details of the synthesis flow.</p>
<p>That said the differences are substantial, much more than I would expect.  So I&#8217;d suggest you extract the worst case signal path delays and see if there is at least some agreement at this level.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144522">

			<div class="comment by-bill-p-godfrey ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://billpg.com/' rel='external nofollow ugc' class='url'>Bill P. Godfrey</a></span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144522">
						September 2, 2010 3:29 AM					</a>

				</p>

				<p>Would co-authorship earn the contributor an Erd≈ës number?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144523">

			<div class="comment by-wb ">

				<p class="commentcredit">

					<span class="commenter">wb</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144523">
						September 2, 2010 6:15 AM					</a>

				</p>

				<p>I&#8217;m not expert, and not even designed any FPGA but there are many adder designs which can be much faster especially for 64+ bits. English wikipedia have nice articles about them. I also found a way to add numbers without O(log n) carry propagation at all! But this needs first converting number to speciall representation (which is slow). Search for sparse skew binary system.</p>
<p>As of comparing hardware of different candidates, remember to keep as much of conditions constant (clocking, transistor sizes, etc), to make analysis simpler.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144524">

			<div class="comment by-zygmunt-lozinski ">

				<p class="commentcredit">

					<span class="commenter">Zygmunt Lozinski</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144524">
						September 2, 2010 6:25 AM					</a>

				</p>

				<p>Yes: I believe it will get you an Erd≈ës number of 5.</p>
<p>How:<br />
Bruce coauthored with Ross Anderson (Econ of Info Sec)</p>
<p>Ross Anderson  coauthored with Torleiv Kl√∏ve MR1658419 (99i:94039)</p>
<p>Torleiv Kl√∏ve coauthored with   Charles J. Colbourn MR2094885 (2005e:94316)</p>
<p>Charles J. Colbourn coauthored with     Paul Erd≈ës1 MR0830680 (87k:05104)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144525">

			<div class="comment by-volker-hetzer ">

				<p class="commentcredit">

					<span class="commenter">Volker Hetzer</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144525">
						September 2, 2010 6:55 AM					</a>

				</p>

				<p>Hi!<br />
B ack, when we did chip design, the main thing in a pipelined design was the placement of the flipflops, i.e. the pipeline stages.<br />
If you do all of the adders and carry logic in one pipeline stage, it&#8217;s the bottleneck.<br />
Extend the pipeline by a few stages, say, so that each addition happens in a separate clock cycle and the throughput ought to increase.</p>
<p>There should be tools that measure how much time is left in each pipeline stage, using a fiven clock frequency.</p>
<p>Just rewriting the Skein code into vhdl or verilog is definitely not going to cut it.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment byuser comment-author-schneier even thread-even depth-1" id="comment-144526">

			<div class="comment by-bruce-schneier official">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.schneier.com' rel='external nofollow ugc' class='url'>Bruce Schneier</a></span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144526">
						September 2, 2010 7:46 AM					</a>

				</p>

				<p>&#8220;Would co-authorship earn the contributor an Erd≈ës number?&#8221;</p>
<p>You&#8217;d get a 4.  I&#8217;m a 3, through Ron Rivest.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment byuser comment-author-schneier odd alt thread-odd thread-alt depth-1" id="comment-144527">

			<div class="comment by-bruce-schneier official">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.schneier.com' rel='external nofollow ugc' class='url'>Bruce Schneier</a></span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144527">
						September 2, 2010 8:21 AM					</a>

				</p>

				<p>&#8220;First: Bruce, the links for the Intel paper is wrong, it points to the PDF with the slides.&#8221;</p>
<p>Fixed.</p>
<p>Thank you.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144528">

			<div class="comment by-martin-thompson ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.parallelpoints.com/' rel='external nofollow ugc' class='url'>Martin Thompson</a></span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144528">
						September 2, 2010 9:05 AM					</a>

				</p>

				<p>A brief look at the GMU paper shows they are explicitly <em>not</em> using any FPGA features other than slice logic.  I know it makes comparisons hard, but it&#8217;s leaving area&amp;performance on the table. It might also show a significant difference between suitability of the various families to the different functions.  Some hashes may be equally efficient across families (which is probably a good thing).</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144529">

			<div class="comment by-roman ">

				<p class="commentcredit">

					<span class="commenter">Roman</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144529">
						September 2, 2010 9:08 AM					</a>

				</p>

				<p>Is source code (e.g. VHDL files + project) available for any implementations mentioned in the post?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144530">

			<div class="comment by-neil-in-chicago ">

				<p class="commentcredit">

					<span class="commenter">Neil in Chicago</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144530">
						September 2, 2010 1:07 PM					</a>

				</p>

				<p>‚ÄúI helped debug Bruce Schneier and all I got was this lousy T-shirt‚Äù?<br />
(yes I can see you grimacing, but I still couldn&#8217;t resist.)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144531">

			<div class="comment by-alan ">

				<p class="commentcredit">

					<span class="commenter">Alan</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144531">
						September 2, 2010 2:09 PM					</a>

				</p>

				<p>Fascinating discussion. I learn so much here (most of this is far over my head!).</p>
<p>I just can&#8217;t resist expressing my admiration for Clive Robinson&#8217;s description of the &#8220;mad adder&#8221;. =)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144533">

			<div class="comment by-doug-coulter ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.coultersmithing.com/forums' rel='external nofollow ugc' class='url'>Doug Coulter</a></span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144533">
						September 2, 2010 6:13 PM					</a>

				</p>

				<p>Me either &#8212; and we did some of that as well, Clive took it farther than I was willing to risk saying out loud here, as some wouldn&#8217;t &#8220;get it&#8221; &#8212; serial being thought of as slow by most.  But he&#8217;s exactly right.  Sounds like we may have had quite similar jobs sometime in the past&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144534">

			<div class="comment by-clive-robinson ">

				<p class="commentcredit">

					<span class="commenter">Clive Robinson</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144534">
						September 2, 2010 9:49 PM					</a>

				</p>

				<p>For those who want to dig a little deeper into the subject of verification of hardware design for arithmetic functions. Have a look at,</p>
<p><a href="http://www.russinoff.com/libman/index.html" rel="nofollow ugc">http://www.russinoff.com/libman/index.html</a></p>
<p>David M. Russinoff has done the rounds (and written the book üòâ He works at AMD where he is involved in the AMD64 design.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144535">

			<div class="comment by-anon ">

				<p class="commentcredit">

					<span class="commenter">Anon</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144535">
						September 3, 2010 12:50 AM					</a>

				</p>

				<p>Standardizing the tree-hashing mode wouldn&#8217;t improve the gate count/performance attributes, but it would let hardware designers scale up their chips to get whatever throughput an app needs for long messages.  Gate area keeps getting cheaper!</p>
<p>That train left long ago, I guess, but might as well make another pitch for parallelism. üôÇ</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144537">

			<div class="comment by-david ">

				<p class="commentcredit">

					<span class="commenter">David</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144537">
						September 3, 2010 4:13 AM					</a>

				</p>

				<p>&#8221; &#8220;Would co-authorship earn the contributor an Erd≈ës number?&#8221;<br />
You&#8217;d get a 4. I&#8217;m a 3, through Ron Rivest.&#8221;</p>
<p>one wonders (nawww&#8230;) if Bruce would add as co-author anyone who&#8217;d posted here&#8230;</p>
<p>~smile~</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144538">

			<div class="comment by-jurjen ">

				<p class="commentcredit">

					<span class="commenter">Jurjen</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144538">
						September 3, 2010 4:28 PM					</a>

				</p>

				<p>Just a thought:<br />
The well known way to speed up long carry computations for additions is &#8220;carry save addition&#8221;, where you remember the carries instead of rippling them through.<br />
These words are easy to rotate, and maybe there is a trick to combine this with XOR in some way. This might speed up things a bit.<br />
(Sorry for putting this under the wrong message first.)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144539">

			<div class="comment by-joachims ">

				<p class="commentcredit">

					<span class="commenter">JoachimS</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144539">
						September 4, 2010 12:50 AM					</a>

				</p>

				<p>Aloha!</p>
<p>Bruce (not Schneier): You are right that delays in 180nm differs from 32nm &#8211; wire delay totally dominates at deep sub micron. But modern FPGAs are manufactured using 65nm, 45nm and even smaller geometries. The difference ASIC vs FPGA is that the wire delays are known and handled by the FPGA Place &amp; Route tools.</p>
<p>J: No sorry, VHDL is not my friend. SystemVerilog is.</p>
<p>The important poin I tried to make is that in order to really get to the gist of the difference, having the same architecture/design would be very helpful. Then it might well be that way that:</p>
<p>(1) Skein can not be efficiently implemented on a current FPGA device. The reliance on 64-bit operators might kill a high performance implementation.</p>
<p>(2) Skein <em>can</em> be implemented efficiently, but requires a different architecture. Bit slicing (as someone else pointed out) etc might be the key here.</p>
<p>But please Skein + Intel team, if you want help, please help by providing any RTL. Put it under GPL, Creative Commons attribute-share alike-non commercial if you like as long as we can do experiments.</p>
<p>Cheers<br />
JoachimS</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144540">

			<div class="comment by-greg ">

				<p class="commentcredit">

					<span class="commenter">Greg</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144540">
						September 4, 2010 6:27 AM					</a>

				</p>

				<p>I must confess that i am surprised 100% FPGA is really relevant? I haven&#8217;t worked on anything without a  dsp on board for the last few years.  Also I haven&#8217;t seen any of these dsps without a 64bit adder path.</p>
<p>Why 100% FPGA?  for chip pin applications i would think gate count is more important?</p>
<p>finally wasn&#8217;t the requirement for the new hashes to be 64bit machine optimized. Then wouldn&#8217;t other hashes suffer from the same problem? (of course many seem to use AES)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144541">

			<div class="comment by-clive-robinson ">

				<p class="commentcredit">

					<span class="commenter">Clive Robinson</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144541">
						September 4, 2010 10:12 AM					</a>

				</p>

				<p>@ Jurjen,</p>
<p>&#8220;The well known way to speed up long carry computations for additions is &#8220;carry save addition&#8221;, where you remember the carries instead of rippling them through These words are easy to rotate, and maybe there is a trick to combine this with XOR in some way This might speed up things a bit&#8221;</p>
<p>Have you been looking at Dadda and Wallace trees in fast multipliers?</p>
<p><a href="http://www.cerc.utexas.edu/~whitney/pdfs/spie03.pdf" rel="nofollow ugc">http://www.cerc.utexas.edu/~whitney/pdfs/spie03.pdf</a></p>
<p>Or &#8220;overturned stairs&#8221;,</p>
<p><a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.101.4204&#038;rep=rep1&#038;type=pdf" rel="nofollow ugc">http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.101.4204&#038;rep=rep1&#038;type=pdf</a></p>
<p><a href="http://portal.acm.org/citation.cfm?id=141489" rel="nofollow ugc">http://portal.acm.org/citation.cfm?id=141489</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144542">

			<div class="comment by-miro ">

				<p class="commentcredit">

					<span class="commenter">Miro</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144542">
						September 5, 2010 4:41 PM					</a>

				</p>

				<p>My first guess would be that all ARX candidates would highly benefit from the Intel&#8217;s 32 nm technology. It definitely works better when it comes down to implementing efficient adders than all other (University available) libraries.</p>
<p>I understand that Intel does not want to release their RTL code, but another verification can be easily done. Most of the above mentioned groups are providing their code online or, at least, are willing to provide it on request. Why do you not then evaluate its performance using Intel&#8217;s technology? By doing that you would, at least, be able to locate the cause of this annoying discrepancy.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144543">

			<div class="comment by-andrew ">

				<p class="commentcredit">

					<span class="commenter">--Andrew</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144543">
						September 6, 2010 3:17 AM					</a>

				</p>

				<p>This probably comes under the heading of a very stupid suggestion on my part and that you are already aware of and have looked at this paper, which seems to have a pretty good breakdown on optimizing Skein on a Xilinx Virtex FPGAs and dealing with efficiently implementing adders/carry in their CLBs.</p>
<p><a href="http://www.skein-hash.info/sites/default/files/skein_fpga.pdf" rel="nofollow ugc">http://www.skein-hash.info/sites/default/files/skein_fpga.pdf</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144544">

			<div class="comment by-simon-helion ">

				<p class="commentcredit">

					<span class="commenter">Simon @Helion</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144544">
						September 6, 2010 9:52 AM					</a>

				</p>

				<p>Hi Bruce</p>
<p>Having implemented the FIPS 180-3 hash functions in FPGA it seems there are two critical issues effecting the performance of Skein in FPGA:</p>
<ol>
<li>It seems that at best for a straight &#8220;one round per clock&#8221; implementation there are two 64-bit adds in the critical path of the Threefish round function. From an FPGA perspective this is not a good thing and is not much better than the critical path of the SHA-384 or SHA-512 functions.</li>
<li>The raw bits per clock number (block size (in bits)/number of rounds per block) is key to the throughput of any hash function. For SHA-256 it is 8 bits/clock and for Skein-256 it is 256/72 = 3.56 bits/clock, so the latter is inherently more than twice as slow. Similarly, Skein-1024 has the same performance as SHA-384 or SHA-512 i.e. 12.8 bits/clock.</li>
</ol>
<p>In my experience, even with judicious use of low level FPGA implementation techniques it would not be possible to achieve more than 200MHz in any current FPGA technology.</p>
<p>All the best<br />
Simon</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144545">

			<div class="comment by-grande-mocha ">

				<p class="commentcredit">

					<span class="commenter">Grande Mocha</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144545">
						September 6, 2010 11:31 AM					</a>

				</p>

				<p>@ Laptop AC Adapter: &#8220;&#8230; wasn&#8217;t the requirement for the new hashes to be 64bit machine optimized&#8221;</p>
<p>Actually, no.  NIST did not explicitly require the SHA-3 candidates to be optimized for 64-bit machines.  However, NIST did choose the Intel Core 2 as the reference platform, which seemed to imply a preference (at least in my mind) for 64-bit platforms.</p>
<p>At this stage of the game, it looks like the arguments are going something like this: all of the 2nd round candidates are &#8220;fast enough*&#8221; on big hardware, so we&#8217;ll concentrate on the embedded platforms.</p>
<ul>
<li>The &#8220;fast enough&#8221; criteria is a little murky because there are candidates such as CubeHash which are hedging their bets by having a &#8220;formal&#8221; mode which is probably secure but very slow versus a &#8220;recommended&#8221; mode which is faster but arguably less secure.</li>
</ul>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144546">

			<div class="comment by-anon ">

				<p class="commentcredit">

					<span class="commenter">Anon</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144546">
						September 6, 2010 7:02 PM					</a>

				</p>

				<p>@Simon: Giving the key schedule its own pipeline stage gets you one addition in the critical path &#8212; 25% more clocks, but potentially cuts your clock period enough to be worth it.  I&#8217;m sure there are tricks that get you well beyond 200MHz.</p>
<p>Anyway, the long-run solution for high throughput is parallelism, either from tree hashing or inherently parallel apps (speeding up thousands of SSL sessions).  As long as an algorithm doesn&#8217;t do anything truly awful &#8212; huge multiplications, random 8&#215;64 S-boxes &#8212; there is a way.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144547">

			<div class="comment by-simon-helion ">

				<p class="commentcredit">

					<span class="commenter">Simon @Helion</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144547">
						September 7, 2010 5:56 AM					</a>

				</p>

				<p>@Anon</p>
<p>I had assumed the subkey would be pipelined and was only considering the critical path of the round function itself as shown in the paper by Men Long.</p>
<p>For a &#8220;straight&#8221; one round per clock implementation it seems you have to perform a mix, permute and subkey add every fourth round. As such the critical path of this approach contains two 64-bit additions. I assume this will be the plain vanilla approach used in the various trials Bruce referred to.</p>
<p>I confess I have not had long to look at the Skein algorithm and there may indeed be ways of obviating this. However, even the presence of a single 64-bit add is a serious limitation on performance in certain FPGA technologies, in particular those commonly used in Mil-Aero and Space applications which do not contain hardwired carry chain logic.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144548">

			<div class="comment by-ml ">

				<p class="commentcredit">

					<span class="commenter">ML</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144548">
						September 7, 2010 1:01 PM					</a>

				</p>

				<p>Not knowing the details of different implementations I would say that unrolling 4 or 8 rounds although simplifies the logic affects the maximum clock frequency and thus performance. So on the top of all the discussion regarding critical path of 64 bit adders I would say that the performance optimized FPGA implementation of Skein should combine unrolling with pipelining.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144549">

			<div class="comment by-anon ">

				<p class="commentcredit">

					<span class="commenter">Anon</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144549">
						September 7, 2010 2:22 PM					</a>

				</p>

				<p>@Simon: I&#8217;m looking at Long&#8217;s paper, figure 10, and it shows two parallel Skein MIXes, then another row of WireShifts and the subkey addition for the key schedule.</p>
<p>You can see that the second row of additions is subkey additions because those adders get their inputs from the box at top right that generates the subkey.</p>
<p>If you look back at the Skein paper, you can see they describe rounds without the key schedule as 2, 4, or 8 additions in parallel (depending on block size).</p>
<p>So you could take Long&#8217;s design and add control logic so it does 4 regular rounds then a subkey addition, or just unroll 4 or 8 rounds as separate pipeline stages with subkey addition &#8220;rounds&#8221; added in the right places, if you have the gate area and can use the extra parallel messages.</p>
<p>(I had forgotten that each key schedule itself involves two serial additions (one to combine key and tweak into subkey, one to add key and block).  The addition to get the subkey could happen in parallel with the MIX in the previous round, just like it happens in parallel with the mixing in Long&#8217;s current design.)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144550">

			<div class="comment by-anon ">

				<p class="commentcredit">

					<span class="commenter">Anon</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144550">
						September 7, 2010 2:29 PM					</a>

				</p>

				<p>@Simon: D&#8217;oh &#8212; I just noticed, Long actually mentions this idea in section 3.3.4 of his paper and estimates it might¬†~double clock frequency and reduce overall latency 37%, but says implementation is &#8220;a work in progress.&#8221;</p>
<p>(He takes the idea a very reasonable step further and reuses adders from the MIXes in the subkey addition, to save gate area.)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144551">

			<div class="comment by-andrew ">

				<p class="commentcredit">

					<span class="commenter">--Andrew</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144551">
						September 8, 2010 1:58 AM					</a>

				</p>

				<p>This might also be of interest &#8211; An IEEE article on implementing fast carry adders in Xilinx Virtex5 FPGAs.  Unfortunately I don&#8217;t have access to it, but the abstract claimed 11% to 35% percent speed-up for 64 bit adders.</p>
<p><a href="http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=5476275" rel="nofollow ugc">http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=5476275</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144552">

			<div class="comment by-clive-robinson ">

				<p class="commentcredit">

					<span class="commenter">Clive Robinson</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144552">
						September 8, 2010 5:00 AM					</a>

				</p>

				<p>@ &#8211;Andrew,</p>
<p>Both of the papers authors work in the faculty of engineering in the Uni of Calabria Italy.</p>
<p><a href="http://www.unical.it" rel="nofollow ugc">http://www.unical.it</a></p>
<p>There Email addresses and other contact details are readily available on the net (just google Stefania Perri or go to the Uni website portal for faculty staff in DEIS).</p>
<p>Searching on Ms Perri&#8217;s email address pulls up a whole load of papers she and Paolo have worked on. Most are to do with related matters to circuit design for FPGA&#8217;s etc in the area of communications.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144553">

			<div class="comment by-clive-robinson ">

				<p class="commentcredit">

					<span class="commenter">Clive Robinson</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144553">
						September 8, 2010 5:09 AM					</a>

				</p>

				<p>@ &#8211;Andrew,</p>
<p>Sorry I forgot to add a link to an earlier paper from Ms Perri that gives you a very good idea of what the latest paper is going to be all about,</p>
<p><a href="http://mosfet.isu.edu/classes/Kantabutra/VLSI04/Corsonello_Perri_Kantabutra_VLSI04_bug-fixed_final.doc" rel="nofollow ugc">http://mosfet.isu.edu/classes/Kantabutra/VLSI04/Corsonello_Perri_Kantabutra_VLSI04_bug-fixed_final.doc</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-144554">

			<div class="comment by-andrew ">

				<p class="commentcredit">

					<span class="commenter">--Andrew</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144554">
						September 9, 2010 12:25 AM					</a>

				</p>

				<p>Thanks Clive, I&#8217;ll take a look.</p>
<p>I was also wanting to review the differing implementations that Bruce cited from a system perspective.  See what other elements besides the Threefish pipelining and adders might be causing issues/consuming clocks and compare it to Intel&#8217;s ASIC implementation.  For example, the Claude Shannon Inst. implementation looked like it used a lot of cycles just padding short messages (Table 3 in their Results section).  I&#8217;d be curious if other implementations had similar characteristics and I&#8217;d also be curious if the test data set leaned heavy that way.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-144555">

			<div class="comment by-ml ">

				<p class="commentcredit">

					<span class="commenter">ML</span> ‚Ä¢

					<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/#comment-144555">
						September 9, 2010 1:00 PM					</a>

				</p>

				<p>This is not going to help with the performance of the sequential Skein however it shows the  potential of the  tree mode implemented on FPGA:</p>
<p><a href="http://gradworks.umi.com/14/74/1474480.html" rel="nofollow ugc">http://gradworks.umi.com/14/74/1474480.html</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

	<p class="subscribe-comments">
		<a href="https://www.schneier.com/blog/archives/2010/09/wanted_skein_ha.html/feed/">
			<img alt="Atom Feed" src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/rss.png">
			Subscribe to comments on this entry		</a>
	</p>

		<div id="respond" class="comment-respond">
		<h2 class="comments-open-header">Leave a comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="/blog/archives/2010/09/wanted_skein_ha.html#respond" style="display:none;">Cancel reply</a></small></h2><form action="https://www.schneier.com/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><a href="https://www.schneier.com/wp-login.php?redirect_to=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2010%2F09%2Fwanted_skein_ha.html" title="Login">Login</a><p class="comment-form-author"><label for="author">Name</label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" /></p>
<p class="comment-form-email"><label for="email">Email</label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" /></p>
<p class="comment-form-url"><label for="url">URL:</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="comment-form-cookies-consent"><input id="wp-comment-cookies-consent" name="wp-comment-cookies-consent" type="checkbox" value="yes" /> <label for="wp-comment-cookies-consent">Remember personal info?</label></p>

<p class="comment-form-author">

	<label for="comm_capt_challenge">
		Fill in the blank: the name of this blog is Schneier on ___________ (required):	</label>

	<input id="comm_capt_challenge" name="comm_capt_challenge" size="30" type="text" />
</p>

<div class="comment-form-comment">

	<label for="comment">Comments:</label>

	<textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea>

	<div id="preview-box" class="preview-box hide"></div>
	<img class="comment-loading hide" src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/loader.gif" />

</div>

<p id="allowed">

	<strong>Allowed HTML</strong>
	&lt;a href=&quot;URL&quot;&gt; &bull; &lt;em&gt; &lt;cite&gt; &lt;i&gt; &bull; &lt;strong&gt; &lt;b&gt; &bull; &lt;sub&gt; &lt;sup&gt; &bull; &lt;ul&gt; &lt;ol&gt; &lt;li&gt; &bull; &lt;blockquote&gt; &lt;pre&gt;
	<strong>Markdown Extra</strong> syntax via <a href="https://michelf.ca/projects/php-markdown/extra/">https://michelf.ca/projects/php-markdown/extra/</a>
</p>

<input type="hidden" id="wp_comment_nonce" name="wp_comment_nonce" value="4b1534b792" /><input type="hidden" name="_wp_http_referer" value="/blog/archives/2010/09/wanted_skein_ha.html" />
<input type="button" id="comment-preview" class="comment-preview comment-actions" value="Preview" />
<input type="button" id="comment-write" class="comment-write comment-actions hide" value="Edit" />

<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Submit" /> <input type='hidden' name='comment_post_ID' value='3547' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p></form>	</div><!-- #respond -->
	
	<div class="stepthrough">
		<a href="https://www.schneier.com/blog/archives/2010/09/more_skein_news.html" rel="prev">‚Üê More Skein News</a>		<a href="https://www.schneier.com/blog/archives/2010/09/cyber-offence_i.html" rel="next">Cyber-Offence is the New Cyber-Defense ‚Üí</a>	</div>

	
<p id="powered">Sidebar photo of Bruce Schneier by Joe MacInnis.</p>
		</div>

		
<aside>
	<div class="sidebar" id="sidebar-two">
		<section><div class="sidesection widget widget_schneier_about" id="schneier_about-2"><h3>About Bruce Schneier</h3><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/Bruce-Schneier.jpg" /><p><p class="small">I am a <a href="https://public-interest-tech.com/">public-interest technologist</a>, working at the intersection of security, technology, and people. I've been writing about security issues on my <a href="/">blog</a> since 2004, and in my monthly <a href="/crypto-gram/">newsletter</a> since 1998. I'm a fellow and lecturer at Harvard's <a href="https://www.hks.harvard.edu/faculty/bruce-schneier">Kennedy School</a>, a board member of <a href="https://www.eff.org/">EFF</a>, and the Chief of Security Architecture at <a href="https://inrupt.com/">Inrupt, Inc.</a> This personal website expresses the opinions of none of those organizations.</p>
</p></div></section><section><div class="sidesection widget widget_schneier_related_posts" id="schneier_related_posts-2"><h3>Related Entries</h3>
<ul>

	<li><a href="https://www.schneier.com/blog/archives/2021/03/illegal-content-and-the-blockchain.html">Illegal Content and the Blockchain</a></li><li><a href="https://www.schneier.com/blog/archives/2021/03/national-security-risks-of-late-stage-capitalism.html">National Security Risks of Late-Stage Capitalism</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/weis-2021-call-for-papers.html">WEIS 2021 Call for Papers</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/ransomware-profitability.html">Ransomware Profitability</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/presidential-cybersecurity-and-pelotons.html">Presidential Cybersecurity and Pelotons</a></li><li><a href="https://www.schneier.com/blog/archives/2021/01/police-have-disrupted-the-emotet-botnet.html">Police Have Disrupted the Emotet Botnet</a></li>
</ul>
</div></section><section><div class="sidesection widget widget_schneier_featured_essays" id="schneier_featured_essays-2"><h3>Featured Essays</h3>
	<ul>
		<li><a href="https://www.schneier.com/essays/archives/2016/04/the_value_of_encrypt.html">The Value of Encryption</a></li><li><a href="https://www.schneier.com/essays/archives/2016/03/data_is_a_toxic_asse.html">Data Is a Toxic Asset, So Why Not Throw It Out?</a></li><li><a href="https://www.schneier.com/essays/archives/2014/01/how_the_nsa_threaten.html">How the NSA Threatens National Security</a></li><li><a href="https://www.schneier.com/essays/archives/2009/01/terrorists_may_use_g.html">Terrorists May Use Google Earth, But Fear Is No Reason to Ban It</a></li><li><a href="https://www.schneier.com/essays/archives/2007/01/in_praise_of_securit.html">In Praise of Security Theater</a></li><li><a href="https://www.schneier.com/essays/archives/2006/08/refuse_to_be_terrori.html">Refuse to be Terrorized</a></li><li><a href="https://www.schneier.com/essays/archives/2006/05/the_eternal_value_of.html">The Eternal Value of Privacy</a></li><li><a href="https://www.schneier.com/essays/archives/2005/09/terrorists_dont_do_m.html">Terrorists Don&#039;t Do Movie Plots</a></li>	</ul>

	<p><a href="https://www.schneier.com/essays/">More Essays</a></p></div></section><section><div class="sidesection widget widget_schneier_archives" id="schneier_archives-2"><h3>Blog Archives</h3>
<ul>

	<li><a href="https://www.schneier.com/blog/calendar.html/">Archive by Month</a></li><li><a href="https://www.schneier.com/blog/newcomments.html/">100 Latest Comments</a></li></ul>

<h4>Blog Tags</h4><ul class="top-tags"><li><a href="https://www.schneier.com/tag/3d-printers/">3d printers</a></li><li><a href="https://www.schneier.com/tag/9-11/">9/11</a></li><li><a href="https://www.schneier.com/tag/aaron-swartz/">Aaron Swartz</a></li><li><a href="https://www.schneier.com/tag/academic/">academic</a></li><li><a href="https://www.schneier.com/tag/academic-papers/">academic papers</a></li><li><a href="https://www.schneier.com/tag/accountability/">accountability</a></li><li><a href="https://www.schneier.com/tag/aclu/">ACLU</a></li><li><a href="https://www.schneier.com/tag/activism/">activism</a></li><li><a href="https://www.schneier.com/tag/adobe/">Adobe</a></li><li><a href="https://www.schneier.com/tag/advanced-persistent-threats/">advanced persistent threats</a></li><li><a href="https://www.schneier.com/tag/adware/">adware</a></li><li><a href="https://www.schneier.com/tag/aes/">AES</a></li><li><a href="https://www.schneier.com/tag/afghanistan/">Afghanistan</a></li><li><a href="https://www.schneier.com/tag/air-marshals/">air marshals</a></li><li><a href="https://www.schneier.com/tag/air-travel/">air travel</a></li><li><a href="https://www.schneier.com/tag/airgaps/">airgaps</a></li><li><a href="https://www.schneier.com/tag/al-qaeda/">al Qaeda</a></li><li><a href="https://www.schneier.com/tag/alarms/">alarms</a></li><li><a href="https://www.schneier.com/tag/algorithms/">algorithms</a></li><li><a href="https://www.schneier.com/tag/alibis/">alibis</a></li><li><a href="https://www.schneier.com/tag/amazon/">Amazon</a></li><li><a href="https://www.schneier.com/tag/android/">Android</a></li><li><a href="https://www.schneier.com/tag/anonymity/">anonymity</a></li><li><a href="https://www.schneier.com/tag/anonymous/">Anonymous</a></li><li><a href="https://www.schneier.com/tag/antivirus/">antivirus</a></li><li><a href="https://www.schneier.com/tag/apache/">Apache</a></li><li><a href="https://www.schneier.com/tag/apple/">Apple</a></li><li><a href="https://www.schneier.com/tag/applied-cryptography/">Applied Cryptography</a></li><li><a href="https://www.schneier.com/tag/artificial-intelligence/">artificial intelligence</a></li><li><a href="https://www.schneier.com/tag/assassinations/">assassinations</a></li></ul><p><a href="https://www.schneier.com/blog/tags.html/">More Tags</a></p></div></section><section><div class="sidesection widget widget_schneier_latest_book" id="schneier_latest_book-3"><h3>Latest Book</h3><a href="https://www.schneier.com/books/click-here/"><img class="sidepic" alt="Click Here to Kill Everybody" src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2018/07/book-ch2-200w.png" /></a><p><a href="https://www.schneier.com/books/">More Books</a></p></div></section><section><div class="sidesection widget widget_schneier_promotion" id="schneier_promotion-2">
<a href="https://www.eff.org/issues/bloggers/legal/join">
	<img src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/join-eff@2x.png" id="effbutton" alt="Support Bloggers' Rights!" title="Support Bloggers' Rights!" /></a>

<a href="https://npo.networkforgood.org/Donate/Donate.aspx?npoSubscriptionId=8252">
	<img src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/support-epic@2x.png" alt="Defend Privacy--Support Epic" title="Defend Privacy--Support Epic" /></a>
</div></section>	</div>
</aside>

		<footer>
			<nav>
				<div class="nav" id="footer-nav">
					<div class="menu-main-menu-container"><ul id="menu-main-menu-1" class="menu"><li class="menu1 menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-50175 current-menu-item"><a href="https://www.schneier.com">Blog</a></li>
<li class="menu2 menu-item menu-item-type-post_type menu-item-object-page menu-item-50916"><a href="https://www.schneier.com/crypto-gram/">Newsletter</a></li>
<li class="menu3 menu-item menu-item-type-post_type menu-item-object-page menu-item-50166"><a href="https://www.schneier.com/books/">Books</a></li>
<li class="menu4 menu-item menu-item-type-custom menu-item-object-custom menu-item-50169"><a href="https://www.schneier.com/essays/">Essays</a></li>
<li class="menu5 menu-item menu-item-type-custom menu-item-object-custom menu-item-50170"><a href="https://www.schneier.com/news/">News</a></li>
<li class="menu6 menu-item menu-item-type-custom menu-item-object-custom menu-item-50171"><a href="https://www.schneier.com/talks/">Talks</a></li>
<li class="menu7 menu-item menu-item-type-post_type menu-item-object-page menu-item-50167"><a href="https://www.schneier.com/academic/">Academic</a></li>
<li class="menu8 menu-item menu-item-type-post_type menu-item-object-page menu-item-50174"><a href="https://www.schneier.com/blog/about/">About Me</a></li>
</ul></div>				</div>
			</nav>
		</footer>

		</div><!--#main-->
	</div><!--#wrapper-->

		<script type="text/javascript">
		(function () {
			var c = document.body.className;
			c = c.replace(/woocommerce-no-js/, 'woocommerce-js');
			document.body.className = c;
		})();
	</script>
	<script type='text/javascript' src='https://c0.wp.com/p/woocommerce/5.1.0/assets/js/jquery-cookie/jquery.cookie.min.js' id='jquery-cookie-js'></script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/vendor/socialshareprivacy/js/socialshareprivacy.js?ver=1.0.1' id='social-share-privacy-js'></script>
<script type='text/javascript' id='social-share-privacy-icons-js-extra'>
/* <![CDATA[ */
var schneierSocial = {"path":"https:\/\/www.schneier.com\/wp-content\/themes\/schneier\/assets\/vendor\/socialshareprivacy\/"};
/* ]]> */
</script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/vendor/socialshareprivacy/js/icons.js?ver=1.0.0' id='social-share-privacy-icons-js'></script>
<script type='text/javascript' id='schneier-comment-js-extra'>
/* <![CDATA[ */
var schneierComment = {"translateErrorSecurityAnswerWrong":"Your response to the challenge question ('The name of this blog is Schneier on ____') was not correct. Please try again.","ajax_url":"https:\/\/www.schneier.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/js/comment.js?ver=1.0.1' id='schneier-comment-js'></script>
<script type='text/javascript' src='https://c0.wp.com/c/5.7/wp-includes/js/wp-embed.min.js' id='wp-embed-js'></script>

</body>

</html>
